(function(){var ec=Object.defineProperty;var tc=(De,ye,ge)=>ye in De?ec(De,ye,{enumerable:!0,configurable:!0,writable:!0,value:ge}):De[ye]=ge;var pe=(De,ye,ge)=>(tc(De,typeof ye!="symbol"?ye+"":ye,ge),ge);(function(){"use strict";const De=e=>{const t=window.document.createElement("script"),r=window.document.getElementsByTagName("head")[0];return t.src=e,r.appendChild(t)},ye=(e,t,r)=>{const n=window.document.createElement("iframe");return n.setAttribute("allowtransparency","true"),n.setAttribute("frameBorder","0"),n.setAttribute("src",r),n.setAttribute("scrolling","no"),e&&(n.style.height=typeof e!="string"?`${e}px`:e),t&&(n.style.width=typeof t!="string"?`${t}px`:t),n.style.display="none",n},ge=e=>typeof e.data=="string"?e.data:"",so=(e,t,r)=>ge(t).match(new RegExp(`(?:${r}:)dressipi.(?:hub|widget).${e}`)),uo=(e,t,r,n)=>{if(n===r){const u=ge(e).match(new RegExp(`(?:${t}:)dressipi.(?:hub|widget).resize;(\\d+)$`));if(u)return u[1]}return null},co=(e,t,r,n)=>{if(n===r){const u=ge(e).match(new RegExp(`(?:${t}:)dressipi.(?:hub|widget).scrollTo;(\\d+)$`));if(u)return u[1]}return null},Ye=e=>Object.keys(e).reduce((t,r)=>(e[r]=="undefined"||typeof e[r]>"u"||(t[r]=e[r]),t),{}),Ot=(e,t,r,n)=>{const o=u=>{const c=u.origin.replace(/(^\w+:|^)\/\//,"");if(so(e,u,r)&&c===t){if(!u.data&&typeof u.data=="string")return null;n(u)}return null};return typeof window.addEventListener<"u"?window.addEventListener("message",o):window.attachEvent("onmessage",o)},fo=(e,t,r,n)=>{Ot("close",t,r,()=>{var o;e.parentNode&&e.parentNode.removeChild(e),(o=n.onClose)==null||o.call(n)}),Ot("ready",t,r,()=>{var o;e.style.display="block",(o=n.onLoad)==null||o.call(n)}),Ot("resize",t,r,o=>{var l;const u=o.origin.replace(/(^\w+:|^)\/\//,""),c=uo(o,r,t,u);return c&&(e.style.height=`${parseInt(c,10)}px`,(l=n.onResize)==null||l.call(n)),null}),Ot("scrollTo",t,r,o=>{var l;const u=o.origin.replace(/(^\w+:|^)\/\//,""),c=co(o,r,t,u);if(c){const{offsetTop:p}=e;return window.scrollTo(0,p+parseInt(c,10)),null}return(l=n.onScroll)==null||l.call(n),null})},lo=e=>Object.keys(e).filter(t=>typeof e[t]<"u"&&e[t]!==void 0).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&"),rn=(e,t,r)=>{if(!r.host)throw new Error("Please pass a server host to connect to in the configuration.");const n=lo(t);return`${r.protocol}//${r.host}${e}${n?`?${n}`:""}`};function nr(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function $e(e,...t){if(!t.length)return e;const r=t.shift();if(nr(e)&&nr(r))for(const n in r)nr(r[n])?(e[n]||Object.assign(e,{[n]:{}}),$e(e[n],r[n])):Object.assign(e,{[n]:r[n]});return $e(e,...t)}const ho=(e,t)=>t.reduce((r,n)=>(typeof e[n]<"u"&&(r[n]=e[n]),r),{}),_e=({name:e,entity:t="page",errors:r})=>{const n=r?`: ${r.join(", ")}`:".";console.error(`[DRESSIPI] ${e} requires data about the ${t}. Please see the documentation to ensure you are passing the correct parameters${n}`)},qr=class{constructor(t){pe(this,"config");pe(this,"set",(t,r,n)=>{if(r==="host"&&n){const o=n.indexOf(".")===-1&&n!=="localhost"?n+"."+window.location.hostname:n;try{const u=new URL(o);this.config.protocol=u.protocol||this.config.protocol,this.config.host=u.host}catch{this.config.host=o}}else this.config[r]=n;r==="namespace_id"&&(this.config.tracker=t.track.init(this.get()))});this.config=$e({},qr.DEFAULT_CONFIG,t||{})}get(){return this.config}};let Pt=qr;pe(Pt,"DEFAULT_CONFIG",{protocol:"https:",retrieveJWT:!1,tracking:{plp:{itemsOptional:!1}},trackWebPage:!0});class po{constructor(t,r,n,o,u,c,l){pe(this,"track");pe(this,"identifiers");pe(this,"widget");pe(this,"related");pe(this,"facetted");pe(this,"configuration");pe(this,"hub");this.track=t,this.widget=r,this.identifiers=n,this.related=o,this.facetted=u,this.configuration=l,this.hub=c}exportedFunctions(){const t={track:this.track,identifiers:this.identifiers,widget:this.widget,config:this.configuration,related:this.related,facetted:this.facetted};return this.hub&&(t.hub=this.hub),t}config(t={}){return $e({},this.configuration.get(),t)}}const vo={get:(e,t)=>{const r=e==null?void 0:e.config().tracker;if(!r)throw new Error("You must provide a namespace_id before requesting identifiers");t({drsp_id:r.getDomainUserId(),pageview_id:r.getPageViewId()})}},mo=()=>window.DressipiLoaderObjectName,yo=e=>{const t=mo();if(!t||window[t].initialized)return;const r=e.exportedFunctions(),n=(u,c,...l)=>{if(!r[u])throw console.error(r),new Error(`Could not load module '${u}'. Valid modules are ${Object.keys(r).join(",")}.`);if(Object.keys(r[u]||{}).indexOf(String(c))===-1)throw new Error(`Could not find function '${String(c)}' within the "${u}" module. Valid functions within are ${Object.keys(r).join(",")}.`);r[u][c](e,...l)},o=window[t].q;for(let u=0;u<o.length;u+=1){const[c,l,...p]=o[u];n(c,l,...p)}return window[t]=n,window[t].initialized=!0,window[t]};var ue=(e=>(e.Detailed="detailed",e.Document="document",e.RetailerIDs="retailer_ids",e))(ue||{});const go=e=>e?{id:e.garment_id,dressipi_item_id:e.raw_garment_id}:null,_o=e=>e?{best_model_image:e.best_model_image?e.best_product_image:null,best_product_image:e.best_product_image?e.best_product_image:null,brand_name:e.brand_name,category_id:e.garment_category_id,category_name:e.garment_category_name,dressipi_item_id:e.id,has_outfits:e.has_outfits,id:e.product_code,old_price:e.old_price,price:e.price,status:e.garment_status,style_id:e.product_id,url:e.url,image_url:e.image_url,images:e.feed_image_urls,thumbnail_image_url:e.thumbnail_image_url||e.image_url,name:e.name}:null,wo=async(e,t)=>{const r=await e.json(),n=ar(t,ir(r.garment_data));return Po(n)(r)},nn=async(e,t,r)=>{const n=await e.json(),o=ar(t,ir(n.garment_data));return So(o,r)(n)},bo=async(e,t)=>{const r=await e.json();if(!r.similar_items.content_id||r.similar_items.content_id==="000000000000000000000000")return{};const n=ar(t,ir(r.garment_data));return Oo(n)(r)},ir=e=>(e||[]).reduce((t,r)=>(t[r.id]=r,t),{}),So=(e,t)=>r=>({response_id:r.event_id,outfits:r[t].map(or(e,r.source))}),Oo=e=>t=>({response_id:t.event_id,content_id:t.similar_items.content_id,items:t.similar_items.items.map(e).flatMap(r=>r?[r]:[])}),or=(e,t)=>r=>({content_id:r.content_id,occasion:r.occasion,items:[t].concat(r.items).map(e).flatMap(n=>n?[n]:[])}),ar=(e,t)=>r=>{switch(e){case ue.Detailed:return _o(t[r.raw_garment_id]);case ue.RetailerIDs:return go(r);default:throw new Error(`[Dressipi] Unknown format ${e}`)}},Po=e=>t=>{const r={response_id:t.event_id};return t.outfits&&(r.outfits=t.outfits.map(or(e,t.source))),t.partner_outfits&&(r.partner_outfits=t.partner_outfits.map(or(e,t.source))),t.similar_items&&t.similar_items.content_id&&t.similar_items.content_id!=="000000000000000000000000"&&(r.similar_items={content_id:t.similar_items.content_id,items:t.similar_items.items.map(e).flatMap(n=>n?[n]:[])}),r},It=e=>{const t=r=>{if(r!=null)return typeof r=="boolean"?r?"true":"false":String(r)};return Object.entries(e).reduce((r,[n,o])=>{if(n==="item_id"||n==="onSuccess"||n==="onFailure")return r;const u=t(o);return u&&(n==="response_format"?r.garment_format=u:r[n]=u),r},{})},Io={items:async(e,t,r={})=>{try{const n=e.config(r),{protocol:o="https",host:u}=n;if(!u)throw new Error("No host configured");if(!t.item_id)throw new Error("No item_id provided");t.response_format||(t.response_format=ue.Detailed);const c=It(t);t.methods&&(Array.isArray(t.methods)?c.methods=t.methods.join(","):c.methods=t.methods),r.variation&&(c.variation=r.variation);const l=Object.entries(c).map(([S,x])=>S==="methods"?`${S}=${x}`:`${S}=${encodeURIComponent(x)}`).join("&"),p=`${o}//${u}/api/items/${encodeURIComponent(t.item_id)}/related?${l}`,v=await fetch(p,{method:"GET",credentials:"include"});if(!v.ok)throw new Error("Failed to retrieve related items ["+v.status+"]");const y=await wo(v,t.response_format||ue.Detailed);return t.onSuccess&&t.onSuccess(y),y}catch(n){return t.onFailure&&t.onFailure(n),Promise.reject(n)}},outfits:async(e,t,r={})=>{try{const n=e.config(r),{protocol:o="https",host:u}=n;if(!u)throw new Error("No host configured");if(!t.item_id)throw new Error("No item_id provided");t.response_format||(t.response_format=ue.Detailed);const c=It(t);c.methods="outfits",r.variation&&(c.variation=r.variation);const l=new URLSearchParams(c).toString(),p=`${o}//${u}/api/items/${encodeURIComponent(t.item_id)}/related?${l}`,v=await fetch(p,{method:"GET",credentials:"include"});if(!v.ok)throw new Error("Failed to retrieve related items ["+v.status+"]");const y=await nn(v,t.response_format||ue.Detailed,"outfits");return t.onSuccess&&t.onSuccess(y),y}catch(n){return t.onFailure&&t.onFailure(n),Promise.reject(n)}},partner_outfits:async(e,t,r={})=>{try{const n=e.config(r),{protocol:o="https",host:u}=n;if(!u)throw new Error("No host configured");if(!t.item_id)throw new Error("No item_id provided");t.response_format||(t.response_format=ue.Detailed);const c=It(t);c.methods="partner_outfits",r.variation&&(c.variation=r.variation);const l=new URLSearchParams(c).toString(),p=`${o}//${u}/api/items/${encodeURIComponent(t.item_id)}/related?${l}`,v=await fetch(p,{method:"GET",credentials:"include"});if(!v.ok)throw new Error("Failed to retrieve related items ["+v.status+"]");const y=await nn(v,t.response_format||ue.Detailed,"partner_outfits"),S={response_id:y.response_id,partner_outfits:y.outfits};return t.onSuccess&&t.onSuccess(S),S}catch(n){return t.onFailure&&t.onFailure(n),Promise.reject(n)}},similar:async(e,t,r={})=>{try{const n=e.config(r),{protocol:o="https",host:u}=n;if(!u)throw new Error("No host configured");if(!t.item_id)throw new Error("No item_id provided");t.response_format||(t.response_format=ue.Detailed);const c=It(t);c.methods="similar_items",r.variation&&(c.variation=r.variation);const l=new URLSearchParams(c).toString(),p=`${o}//${u}/api/items/${encodeURIComponent(t.item_id)}/related?${l}`,v=await fetch(p,{method:"GET",credentials:"include"});if(!v.ok)throw new Error("Failed to retrieve related items ["+v.status+"]");const y=await bo(v,t.response_format||ue.Detailed);return t.onSuccess&&t.onSuccess(y),y}catch(n){return t.onFailure&&t.onFailure(n),Promise.reject(n)}}},sr="Dressipi",xo=e=>{window[sr]=window[sr]||{},window[sr].events={push:t=>{if(t.event==="pageTracked")e.configuration.set(e,"pageEventId",t.id),e.configuration.set(e,"location",window.location.href);else throw new Error("A call was made to push to the legacy events API which is not supported in the new SDK. Please use `Dressipi('[FunctionName]', params)` instead.")}}};var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ur(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var u=Function.bind.apply(t,o);return new u}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var on={},cr={},To={get exports(){return cr},set exports(e){cr=e}};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */(function(e){var t,r,n,o,u,c,l,p,v,y,S,x,D,A,P,F,V,k,W,O,B,z,q;(function(w){var G=typeof oe=="object"?oe:typeof self=="object"?self:typeof this=="object"?this:{};w(i(G,i(e.exports)));function i(a,s){return a!==G&&(typeof Object.create=="function"?Object.defineProperty(a,"__esModule",{value:!0}):a.__esModule=!0),function(d,h){return a[d]=s?s(d,h):h}}})(function(w){var G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)a.hasOwnProperty(s)&&(i[s]=a[s])};t=function(i,a){G(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)},r=Object.assign||function(i){for(var a,s=1,d=arguments.length;s<d;s++){a=arguments[s];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(i[h]=a[h])}return i},n=function(i,a){var s={};for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&a.indexOf(d)<0&&(s[d]=i[d]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(i);h<d.length;h++)a.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(i,d[h])&&(s[d[h]]=i[d[h]]);return s},o=function(i,a,s,d){var h=arguments.length,f=h<3?a:d===null?d=Object.getOwnPropertyDescriptor(a,s):d,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(i,a,s,d);else for(var b=i.length-1;b>=0;b--)(g=i[b])&&(f=(h<3?g(f):h>3?g(a,s,f):g(a,s))||f);return h>3&&f&&Object.defineProperty(a,s,f),f},u=function(i,a){return function(s,d){a(s,d,i)}},c=function(i,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,a)},l=function(i,a,s,d){function h(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function b(C){try{_(d.next(C))}catch(L){g(L)}}function R(C){try{_(d.throw(C))}catch(L){g(L)}}function _(C){C.done?f(C.value):h(C.value).then(b,R)}_((d=d.apply(i,a||[])).next())})},p=function(i,a){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},d,h,f,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(_){return function(C){return R([_,C])}}function R(_){if(d)throw new TypeError("Generator is already executing.");for(;s;)try{if(d=1,h&&(f=_[0]&2?h.return:_[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,_[1])).done)return f;switch(h=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return s.label++,{value:_[1],done:!1};case 5:s.label++,h=_[1],_=[0];continue;case 7:_=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){s=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){s.label=_[1];break}if(_[0]===6&&s.label<f[1]){s.label=f[1],f=_;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(_);break}f[2]&&s.ops.pop(),s.trys.pop();continue}_=a.call(i,s)}catch(C){_=[6,C],h=0}finally{d=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},q=function(i,a,s,d){d===void 0&&(d=s),i[d]=a[s]},v=function(i,a){for(var s in i)s!=="default"&&!a.hasOwnProperty(s)&&(a[s]=i[s])},y=function(i){var a=typeof Symbol=="function"&&Symbol.iterator,s=a&&i[a],d=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&d>=i.length&&(i=void 0),{value:i&&i[d++],done:!i}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},S=function(i,a){var s=typeof Symbol=="function"&&i[Symbol.iterator];if(!s)return i;var d=s.call(i),h,f=[],g;try{for(;(a===void 0||a-- >0)&&!(h=d.next()).done;)f.push(h.value)}catch(b){g={error:b}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(g)throw g.error}}return f},x=function(){for(var i=[],a=0;a<arguments.length;a++)i=i.concat(S(arguments[a]));return i},D=function(){for(var i=0,a=0,s=arguments.length;a<s;a++)i+=arguments[a].length;for(var d=Array(i),h=0,a=0;a<s;a++)for(var f=arguments[a],g=0,b=f.length;g<b;g++,h++)d[h]=f[g];return d},A=function(i){return this instanceof A?(this.v=i,this):new A(i)},P=function(i,a,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=s.apply(i,a||[]),h,f=[];return h={},g("next"),g("throw"),g("return"),h[Symbol.asyncIterator]=function(){return this},h;function g(T){d[T]&&(h[T]=function(M){return new Promise(function(X,j){f.push([T,M,X,j])>1||b(T,M)})})}function b(T,M){try{R(d[T](M))}catch(X){L(f[0][3],X)}}function R(T){T.value instanceof A?Promise.resolve(T.value.v).then(_,C):L(f[0][2],T)}function _(T){b("next",T)}function C(T){b("throw",T)}function L(T,M){T(M),f.shift(),f.length&&b(f[0][0],f[0][1])}},F=function(i){var a,s;return a={},d("next"),d("throw",function(h){throw h}),d("return"),a[Symbol.iterator]=function(){return this},a;function d(h,f){a[h]=i[h]?function(g){return(s=!s)?{value:A(i[h](g)),done:h==="return"}:f?f(g):g}:f}},V=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i[Symbol.asyncIterator],s;return a?a.call(i):(i=typeof y=="function"?y(i):i[Symbol.iterator](),s={},d("next"),d("throw"),d("return"),s[Symbol.asyncIterator]=function(){return this},s);function d(f){s[f]=i[f]&&function(g){return new Promise(function(b,R){g=i[f](g),h(b,R,g.done,g.value)})}}function h(f,g,b,R){Promise.resolve(R).then(function(_){f({value:_,done:b})},g)}},k=function(i,a){return Object.defineProperty?Object.defineProperty(i,"raw",{value:a}):i.raw=a,i},W=function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var s in i)Object.hasOwnProperty.call(i,s)&&(a[s]=i[s]);return a.default=i,a},O=function(i){return i&&i.__esModule?i:{default:i}},B=function(i,a){if(!a.has(i))throw new TypeError("attempted to get private field on non-instance");return a.get(i)},z=function(i,a,s){if(!a.has(i))throw new TypeError("attempted to set private field on non-instance");return a.set(i,s),s},w("__extends",t),w("__assign",r),w("__rest",n),w("__decorate",o),w("__param",u),w("__metadata",c),w("__awaiter",l),w("__generator",p),w("__exportStar",v),w("__createBinding",q),w("__values",y),w("__read",S),w("__spread",x),w("__spreadArrays",D),w("__await",A),w("__asyncGenerator",P),w("__asyncDelegator",F),w("__asyncValues",V),w("__makeTemplateObject",k),w("__importStar",W),w("__importDefault",O),w("__classPrivateFieldGet",B),w("__classPrivateFieldSet",z)})})(To);var Qe={},et={},tt={},an;function Ao(){if(an)return tt;an=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return tt.isEmptyData=e,tt}var fr={},sn;function un(){return sn||(sn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_256=e.SHA_256_HMAC_ALGO=e.SHA_256_HASH=void 0,e.SHA_256_HASH={name:"SHA-256"},e.SHA_256_HMAC_ALGO={name:"HMAC",hash:e.SHA_256_HASH},e.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}(fr)),fr}const Eo=e=>{const t=[];for(let r=0,n=e.length;r<n;r++){const o=e.charCodeAt(r);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(r+1<e.length&&(o&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){const u=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)},jo=e=>{let t="";for(let r=0,n=e.length;r<n;r++){const o=e[r];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){const u=e[++r];t+=String.fromCharCode((o&31)<<6|u&63)}else if(240<=o&&o<365){const c="%"+[o,e[++r],e[++r],e[++r]].map(l=>l.toString(16)).join("%");t+=decodeURIComponent(c)}else t+=String.fromCharCode((o&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t};function Co(e){return new TextEncoder().encode(e)}function ko(e){return new TextDecoder("utf-8").decode(e)}const cn=ur(Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:e=>typeof TextEncoder=="function"?Co(e):Eo(e),toUtf8:e=>typeof TextDecoder=="function"?ko(e):jo(e)},Symbol.toStringTag,{value:"Module"}))),Ro={};function Do(){return typeof window<"u"?window:typeof self<"u"?self:Ro}const lr=ur(Object.freeze(Object.defineProperty({__proto__:null,locateWindow:Do},Symbol.toStringTag,{value:"Module"})));var fn;function ln(){if(fn)return et;fn=1,Object.defineProperty(et,"__esModule",{value:!0}),et.Sha256=void 0;var e=Ao(),t=un(),r=cn,n=lr,o=function(){function l(p){this.secret=p,this.reset()}return l.prototype.update=function(p){var v=this;(0,e.isEmptyData)(p)||(this.operation=this.operation.then(function(y){return y.onerror=function(){v.operation=Promise.reject(new Error("Error encountered updating hash"))},y.process(c(p)),y}),this.operation.catch(function(){}))},l.prototype.digest=function(){return this.operation.then(function(p){return new Promise(function(v,y){p.onerror=function(){y(new Error("Error encountered finalizing hash"))},p.oncomplete=function(){p.result&&v(new Uint8Array(p.result)),y(new Error("Error encountered finalizing hash"))},p.finish()})})},l.prototype.reset=function(){this.secret?(this.operation=u(this.secret).then(function(p){return(0,n.locateWindow)().msCrypto.subtle.sign(t.SHA_256_HMAC_ALGO,p)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,n.locateWindow)().msCrypto.subtle.digest("SHA-256"))},l}();et.Sha256=o;function u(l){return new Promise(function(p,v){var y=(0,n.locateWindow)().msCrypto.subtle.importKey("raw",c(l),t.SHA_256_HMAC_ALGO,!1,["sign"]);y.oncomplete=function(){y.result&&p(y.result),v(new Error("ImportKey completed without importing key."))},y.onerror=function(){v(new Error("ImportKey failed to import key."))}})}function c(l){return typeof l=="string"?(0,r.fromUtf8)(l):ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(l)}return et}var rt={},dr={},nt={},dn;function $o(){if(dn)return nt;dn=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.convertToBuffer=void 0;var e=cn,t=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:e.fromUtf8;function r(n){return n instanceof Uint8Array?n:typeof n=="string"?t(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}return nt.convertToBuffer=r,nt}var it={},hn;function Uo(){if(hn)return it;hn=1,Object.defineProperty(it,"__esModule",{value:!0}),it.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return it.isEmptyData=e,it}var ot={},pn;function Bo(){if(pn)return ot;pn=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.numToUint8=void 0;function e(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}return ot.numToUint8=e,ot}var at={},vn;function Lo(){if(vn)return at;vn=1,Object.defineProperty(at,"__esModule",{value:!0}),at.uint32ArrayFrom=void 0;function e(t){if(!Uint32Array.from){for(var r=new Uint32Array(t.length),n=0;n<t.length;)r[n]=t[n],n+=1;return r}return Uint32Array.from(t)}return at.uint32ArrayFrom=e,at}var mn;function hr(){return mn||(mn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=$o();Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var r=Uo();Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var n=Bo();Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return n.numToUint8}});var o=Lo();Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return o.uint32ArrayFrom}})}(dr)),dr}var yn;function gn(){if(yn)return rt;yn=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.Sha256=void 0;var e=hr(),t=un(),r=lr,n=function(){function o(u){this.toHash=new Uint8Array(0),this.secret=u,this.reset()}return o.prototype.update=function(u){if(!(0,e.isEmptyData)(u)){var c=(0,e.convertToBuffer)(u),l=new Uint8Array(this.toHash.byteLength+c.byteLength);l.set(this.toHash,0),l.set(c,this.toHash.byteLength),this.toHash=l}},o.prototype.digest=function(){var u=this;return this.key?this.key.then(function(c){return(0,r.locateWindow)().crypto.subtle.sign(t.SHA_256_HMAC_ALGO,c,u.toHash).then(function(l){return new Uint8Array(l)})}):(0,e.isEmptyData)(this.toHash)?Promise.resolve(t.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,r.locateWindow)().crypto.subtle.digest(t.SHA_256_HASH,u.toHash)}).then(function(c){return Promise.resolve(new Uint8Array(c))})},o.prototype.reset=function(){var u=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(c,l){(0,r.locateWindow)().crypto.subtle.importKey("raw",(0,e.convertToBuffer)(u.secret),t.SHA_256_HMAC_ALGO,!1,["sign"]).then(c,l)}),this.key.catch(function(){}))},o}();return rt.Sha256=n,rt}var pr={},xt={},Mo={get exports(){return xt},set exports(e){xt=e}};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var _n;function wn(){return _n||(_n=1,function(e){var t,r,n,o,u,c,l,p,v,y,S,x,D,A,P,F,V,k,W,O,B,z,q;(function(w){var G=typeof oe=="object"?oe:typeof self=="object"?self:typeof this=="object"?this:{};w(i(G,i(e.exports)));function i(a,s){return a!==G&&(typeof Object.create=="function"?Object.defineProperty(a,"__esModule",{value:!0}):a.__esModule=!0),function(d,h){return a[d]=s?s(d,h):h}}})(function(w){var G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)a.hasOwnProperty(s)&&(i[s]=a[s])};t=function(i,a){G(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)},r=Object.assign||function(i){for(var a,s=1,d=arguments.length;s<d;s++){a=arguments[s];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(i[h]=a[h])}return i},n=function(i,a){var s={};for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&a.indexOf(d)<0&&(s[d]=i[d]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(i);h<d.length;h++)a.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(i,d[h])&&(s[d[h]]=i[d[h]]);return s},o=function(i,a,s,d){var h=arguments.length,f=h<3?a:d===null?d=Object.getOwnPropertyDescriptor(a,s):d,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(i,a,s,d);else for(var b=i.length-1;b>=0;b--)(g=i[b])&&(f=(h<3?g(f):h>3?g(a,s,f):g(a,s))||f);return h>3&&f&&Object.defineProperty(a,s,f),f},u=function(i,a){return function(s,d){a(s,d,i)}},c=function(i,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,a)},l=function(i,a,s,d){function h(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function b(C){try{_(d.next(C))}catch(L){g(L)}}function R(C){try{_(d.throw(C))}catch(L){g(L)}}function _(C){C.done?f(C.value):h(C.value).then(b,R)}_((d=d.apply(i,a||[])).next())})},p=function(i,a){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},d,h,f,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(_){return function(C){return R([_,C])}}function R(_){if(d)throw new TypeError("Generator is already executing.");for(;s;)try{if(d=1,h&&(f=_[0]&2?h.return:_[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,_[1])).done)return f;switch(h=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return s.label++,{value:_[1],done:!1};case 5:s.label++,h=_[1],_=[0];continue;case 7:_=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){s=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){s.label=_[1];break}if(_[0]===6&&s.label<f[1]){s.label=f[1],f=_;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(_);break}f[2]&&s.ops.pop(),s.trys.pop();continue}_=a.call(i,s)}catch(C){_=[6,C],h=0}finally{d=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},q=function(i,a,s,d){d===void 0&&(d=s),i[d]=a[s]},v=function(i,a){for(var s in i)s!=="default"&&!a.hasOwnProperty(s)&&(a[s]=i[s])},y=function(i){var a=typeof Symbol=="function"&&Symbol.iterator,s=a&&i[a],d=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&d>=i.length&&(i=void 0),{value:i&&i[d++],done:!i}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},S=function(i,a){var s=typeof Symbol=="function"&&i[Symbol.iterator];if(!s)return i;var d=s.call(i),h,f=[],g;try{for(;(a===void 0||a-- >0)&&!(h=d.next()).done;)f.push(h.value)}catch(b){g={error:b}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(g)throw g.error}}return f},x=function(){for(var i=[],a=0;a<arguments.length;a++)i=i.concat(S(arguments[a]));return i},D=function(){for(var i=0,a=0,s=arguments.length;a<s;a++)i+=arguments[a].length;for(var d=Array(i),h=0,a=0;a<s;a++)for(var f=arguments[a],g=0,b=f.length;g<b;g++,h++)d[h]=f[g];return d},A=function(i){return this instanceof A?(this.v=i,this):new A(i)},P=function(i,a,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=s.apply(i,a||[]),h,f=[];return h={},g("next"),g("throw"),g("return"),h[Symbol.asyncIterator]=function(){return this},h;function g(T){d[T]&&(h[T]=function(M){return new Promise(function(X,j){f.push([T,M,X,j])>1||b(T,M)})})}function b(T,M){try{R(d[T](M))}catch(X){L(f[0][3],X)}}function R(T){T.value instanceof A?Promise.resolve(T.value.v).then(_,C):L(f[0][2],T)}function _(T){b("next",T)}function C(T){b("throw",T)}function L(T,M){T(M),f.shift(),f.length&&b(f[0][0],f[0][1])}},F=function(i){var a,s;return a={},d("next"),d("throw",function(h){throw h}),d("return"),a[Symbol.iterator]=function(){return this},a;function d(h,f){a[h]=i[h]?function(g){return(s=!s)?{value:A(i[h](g)),done:h==="return"}:f?f(g):g}:f}},V=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i[Symbol.asyncIterator],s;return a?a.call(i):(i=typeof y=="function"?y(i):i[Symbol.iterator](),s={},d("next"),d("throw"),d("return"),s[Symbol.asyncIterator]=function(){return this},s);function d(f){s[f]=i[f]&&function(g){return new Promise(function(b,R){g=i[f](g),h(b,R,g.done,g.value)})}}function h(f,g,b,R){Promise.resolve(R).then(function(_){f({value:_,done:b})},g)}},k=function(i,a){return Object.defineProperty?Object.defineProperty(i,"raw",{value:a}):i.raw=a,i},W=function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var s in i)Object.hasOwnProperty.call(i,s)&&(a[s]=i[s]);return a.default=i,a},O=function(i){return i&&i.__esModule?i:{default:i}},B=function(i,a){if(!a.has(i))throw new TypeError("attempted to get private field on non-instance");return a.get(i)},z=function(i,a,s){if(!a.has(i))throw new TypeError("attempted to set private field on non-instance");return a.set(i,s),s},w("__extends",t),w("__assign",r),w("__rest",n),w("__decorate",o),w("__param",u),w("__metadata",c),w("__awaiter",l),w("__generator",p),w("__exportStar",v),w("__createBinding",q),w("__values",y),w("__read",S),w("__spread",x),w("__spreadArrays",D),w("__await",A),w("__asyncGenerator",P),w("__asyncDelegator",F),w("__asyncValues",V),w("__makeTemplateObject",k),w("__importStar",W),w("__importDefault",O),w("__classPrivateFieldGet",B),w("__classPrivateFieldSet",z)})}(Mo)),xt}var st={},te={},bn;function Sn(){return bn||(bn=1,Object.defineProperty(te,"__esModule",{value:!0}),te.MAX_HASHABLE_LENGTH=te.INIT=te.KEY=te.DIGEST_LENGTH=te.BLOCK_SIZE=void 0,te.BLOCK_SIZE=64,te.DIGEST_LENGTH=32,te.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),te.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],te.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),te}var ut={},On;function No(){if(On)return ut;On=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.RawSha256=void 0;var e=Sn(),t=function(){function r(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r.prototype.update=function(n){if(this.finished)throw new Error("Attempted to update an already finished hash.");var o=0,u=n.byteLength;if(this.bytesHashed+=u,this.bytesHashed*8>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;u>0;)this.buffer[this.bufferLength++]=n[o++],u--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},r.prototype.digest=function(){if(!this.finished){var n=this.bytesHashed*8,o=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),u=this.bufferLength;if(o.setUint8(this.bufferLength++,128),u%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var c=this.bufferLength;c<e.BLOCK_SIZE;c++)o.setUint8(c,0);this.hashBuffer(),this.bufferLength=0}for(var c=this.bufferLength;c<e.BLOCK_SIZE-8;c++)o.setUint8(c,0);o.setUint32(e.BLOCK_SIZE-8,Math.floor(n/4294967296),!0),o.setUint32(e.BLOCK_SIZE-4,n),this.hashBuffer(),this.finished=!0}for(var l=new Uint8Array(e.DIGEST_LENGTH),c=0;c<8;c++)l[c*4]=this.state[c]>>>24&255,l[c*4+1]=this.state[c]>>>16&255,l[c*4+2]=this.state[c]>>>8&255,l[c*4+3]=this.state[c]>>>0&255;return l},r.prototype.hashBuffer=function(){for(var n=this,o=n.buffer,u=n.state,c=u[0],l=u[1],p=u[2],v=u[3],y=u[4],S=u[5],x=u[6],D=u[7],A=0;A<e.BLOCK_SIZE;A++){if(A<16)this.temp[A]=(o[A*4]&255)<<24|(o[A*4+1]&255)<<16|(o[A*4+2]&255)<<8|o[A*4+3]&255;else{var P=this.temp[A-2],F=(P>>>17|P<<15)^(P>>>19|P<<13)^P>>>10;P=this.temp[A-15];var V=(P>>>7|P<<25)^(P>>>18|P<<14)^P>>>3;this.temp[A]=(F+this.temp[A-7]|0)+(V+this.temp[A-16]|0)}var k=(((y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&S^~y&x)|0)+(D+(e.KEY[A]+this.temp[A]|0)|0)|0,W=((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+(c&l^c&p^l&p)|0;D=x,x=S,S=y,y=v+k|0,v=p,p=l,l=c,c=k+W|0}u[0]+=c,u[1]+=l,u[2]+=p,u[3]+=v,u[4]+=y,u[5]+=S,u[6]+=x,u[7]+=D},r}();return ut.RawSha256=t,ut}var Pn;function Fo(){if(Pn)return st;Pn=1,Object.defineProperty(st,"__esModule",{value:!0}),st.Sha256=void 0;var e=wn(),t=Sn(),r=No(),n=hr(),o=function(){function c(l){this.secret=l,this.hash=new r.RawSha256,this.reset()}return c.prototype.update=function(l){if(!((0,n.isEmptyData)(l)||this.error))try{this.hash.update((0,n.convertToBuffer)(l))}catch(p){this.error=p}},c.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},c.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(l){return[2,this.digestSync()]})})},c.prototype.reset=function(){if(this.hash=new r.RawSha256,this.secret){this.outer=new r.RawSha256;var l=u(this.secret),p=new Uint8Array(t.BLOCK_SIZE);p.set(l);for(var v=0;v<t.BLOCK_SIZE;v++)l[v]^=54,p[v]^=92;this.hash.update(l),this.outer.update(p);for(var v=0;v<l.byteLength;v++)l[v]=0}},c}();st.Sha256=o;function u(c){var l=(0,n.convertToBuffer)(c);if(l.byteLength>t.BLOCK_SIZE){var p=new r.RawSha256;p.update(l),l=p.digest()}var v=new Uint8Array(t.BLOCK_SIZE);return v.set(l),v}return st}var In;function Ho(){return In||(In=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=wn();t.__exportStar(Fo(),e)}(pr)),pr}var vr={},Tt={},Vo={get exports(){return Tt},set exports(e){Tt=e}};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var xn;function Tn(){return xn||(xn=1,function(e){var t,r,n,o,u,c,l,p,v,y,S,x,D,A,P,F,V,k,W,O,B,z,q;(function(w){var G=typeof oe=="object"?oe:typeof self=="object"?self:typeof this=="object"?this:{};w(i(G,i(e.exports)));function i(a,s){return a!==G&&(typeof Object.create=="function"?Object.defineProperty(a,"__esModule",{value:!0}):a.__esModule=!0),function(d,h){return a[d]=s?s(d,h):h}}})(function(w){var G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)a.hasOwnProperty(s)&&(i[s]=a[s])};t=function(i,a){G(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)},r=Object.assign||function(i){for(var a,s=1,d=arguments.length;s<d;s++){a=arguments[s];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(i[h]=a[h])}return i},n=function(i,a){var s={};for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&a.indexOf(d)<0&&(s[d]=i[d]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(i);h<d.length;h++)a.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(i,d[h])&&(s[d[h]]=i[d[h]]);return s},o=function(i,a,s,d){var h=arguments.length,f=h<3?a:d===null?d=Object.getOwnPropertyDescriptor(a,s):d,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(i,a,s,d);else for(var b=i.length-1;b>=0;b--)(g=i[b])&&(f=(h<3?g(f):h>3?g(a,s,f):g(a,s))||f);return h>3&&f&&Object.defineProperty(a,s,f),f},u=function(i,a){return function(s,d){a(s,d,i)}},c=function(i,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,a)},l=function(i,a,s,d){function h(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function b(C){try{_(d.next(C))}catch(L){g(L)}}function R(C){try{_(d.throw(C))}catch(L){g(L)}}function _(C){C.done?f(C.value):h(C.value).then(b,R)}_((d=d.apply(i,a||[])).next())})},p=function(i,a){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},d,h,f,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(_){return function(C){return R([_,C])}}function R(_){if(d)throw new TypeError("Generator is already executing.");for(;s;)try{if(d=1,h&&(f=_[0]&2?h.return:_[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,_[1])).done)return f;switch(h=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return s.label++,{value:_[1],done:!1};case 5:s.label++,h=_[1],_=[0];continue;case 7:_=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){s=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){s.label=_[1];break}if(_[0]===6&&s.label<f[1]){s.label=f[1],f=_;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(_);break}f[2]&&s.ops.pop(),s.trys.pop();continue}_=a.call(i,s)}catch(C){_=[6,C],h=0}finally{d=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},q=function(i,a,s,d){d===void 0&&(d=s),i[d]=a[s]},v=function(i,a){for(var s in i)s!=="default"&&!a.hasOwnProperty(s)&&(a[s]=i[s])},y=function(i){var a=typeof Symbol=="function"&&Symbol.iterator,s=a&&i[a],d=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&d>=i.length&&(i=void 0),{value:i&&i[d++],done:!i}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},S=function(i,a){var s=typeof Symbol=="function"&&i[Symbol.iterator];if(!s)return i;var d=s.call(i),h,f=[],g;try{for(;(a===void 0||a-- >0)&&!(h=d.next()).done;)f.push(h.value)}catch(b){g={error:b}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(g)throw g.error}}return f},x=function(){for(var i=[],a=0;a<arguments.length;a++)i=i.concat(S(arguments[a]));return i},D=function(){for(var i=0,a=0,s=arguments.length;a<s;a++)i+=arguments[a].length;for(var d=Array(i),h=0,a=0;a<s;a++)for(var f=arguments[a],g=0,b=f.length;g<b;g++,h++)d[h]=f[g];return d},A=function(i){return this instanceof A?(this.v=i,this):new A(i)},P=function(i,a,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=s.apply(i,a||[]),h,f=[];return h={},g("next"),g("throw"),g("return"),h[Symbol.asyncIterator]=function(){return this},h;function g(T){d[T]&&(h[T]=function(M){return new Promise(function(X,j){f.push([T,M,X,j])>1||b(T,M)})})}function b(T,M){try{R(d[T](M))}catch(X){L(f[0][3],X)}}function R(T){T.value instanceof A?Promise.resolve(T.value.v).then(_,C):L(f[0][2],T)}function _(T){b("next",T)}function C(T){b("throw",T)}function L(T,M){T(M),f.shift(),f.length&&b(f[0][0],f[0][1])}},F=function(i){var a,s;return a={},d("next"),d("throw",function(h){throw h}),d("return"),a[Symbol.iterator]=function(){return this},a;function d(h,f){a[h]=i[h]?function(g){return(s=!s)?{value:A(i[h](g)),done:h==="return"}:f?f(g):g}:f}},V=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i[Symbol.asyncIterator],s;return a?a.call(i):(i=typeof y=="function"?y(i):i[Symbol.iterator](),s={},d("next"),d("throw"),d("return"),s[Symbol.asyncIterator]=function(){return this},s);function d(f){s[f]=i[f]&&function(g){return new Promise(function(b,R){g=i[f](g),h(b,R,g.done,g.value)})}}function h(f,g,b,R){Promise.resolve(R).then(function(_){f({value:_,done:b})},g)}},k=function(i,a){return Object.defineProperty?Object.defineProperty(i,"raw",{value:a}):i.raw=a,i},W=function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var s in i)Object.hasOwnProperty.call(i,s)&&(a[s]=i[s]);return a.default=i,a},O=function(i){return i&&i.__esModule?i:{default:i}},B=function(i,a){if(!a.has(i))throw new TypeError("attempted to get private field on non-instance");return a.get(i)},z=function(i,a,s){if(!a.has(i))throw new TypeError("attempted to set private field on non-instance");return a.set(i,s),s},w("__extends",t),w("__assign",r),w("__rest",n),w("__decorate",o),w("__param",u),w("__metadata",c),w("__awaiter",l),w("__generator",p),w("__exportStar",v),w("__createBinding",q),w("__values",y),w("__read",S),w("__spread",x),w("__spreadArrays",D),w("__await",A),w("__asyncGenerator",P),w("__asyncDelegator",F),w("__asyncValues",V),w("__makeTemplateObject",k),w("__importStar",W),w("__importDefault",O),w("__classPrivateFieldGet",B),w("__classPrivateFieldSet",z)})}(Vo)),Tt}var ce={},An;function qo(){if(An)return ce;An=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.supportsZeroByteGCM=ce.supportsSubtleCrypto=ce.supportsSecureRandom=ce.supportsWebCrypto=void 0;var e=Tn(),t=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(c){if(n(c)&&typeof c.crypto.subtle=="object"){var l=c.crypto.subtle;return o(l)}return!1}ce.supportsWebCrypto=r;function n(c){if(typeof c=="object"&&typeof c.crypto=="object"){var l=c.crypto.getRandomValues;return typeof l=="function"}return!1}ce.supportsSecureRandom=n;function o(c){return c&&t.every(function(l){return typeof c[l]=="function"})}ce.supportsSubtleCrypto=o;function u(c){return e.__awaiter(this,void 0,void 0,function(){var l,p;return e.__generator(this,function(v){switch(v.label){case 0:if(!o(c))return[2,!1];v.label=1;case 1:return v.trys.push([1,4,,5]),[4,c.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return l=v.sent(),[4,c.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},l,new Uint8Array(0))];case 3:return p=v.sent(),[2,p.byteLength===16];case 4:return v.sent(),[2,!1];case 5:return[2]}})})}return ce.supportsZeroByteGCM=u,ce}var En;function Go(){return En||(En=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Tn();t.__exportStar(qo(),e)}(vr)),vr}var mr={},At={},Wo={get exports(){return At},set exports(e){At=e}};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var jn;function zo(){return jn||(jn=1,function(e){var t,r,n,o,u,c,l,p,v,y,S,x,D,A,P,F,V,k,W,O,B,z,q;(function(w){var G=typeof oe=="object"?oe:typeof self=="object"?self:typeof this=="object"?this:{};w(i(G,i(e.exports)));function i(a,s){return a!==G&&(typeof Object.create=="function"?Object.defineProperty(a,"__esModule",{value:!0}):a.__esModule=!0),function(d,h){return a[d]=s?s(d,h):h}}})(function(w){var G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)a.hasOwnProperty(s)&&(i[s]=a[s])};t=function(i,a){G(i,a);function s(){this.constructor=i}i.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)},r=Object.assign||function(i){for(var a,s=1,d=arguments.length;s<d;s++){a=arguments[s];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(i[h]=a[h])}return i},n=function(i,a){var s={};for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&a.indexOf(d)<0&&(s[d]=i[d]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(i);h<d.length;h++)a.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(i,d[h])&&(s[d[h]]=i[d[h]]);return s},o=function(i,a,s,d){var h=arguments.length,f=h<3?a:d===null?d=Object.getOwnPropertyDescriptor(a,s):d,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(i,a,s,d);else for(var b=i.length-1;b>=0;b--)(g=i[b])&&(f=(h<3?g(f):h>3?g(a,s,f):g(a,s))||f);return h>3&&f&&Object.defineProperty(a,s,f),f},u=function(i,a){return function(s,d){a(s,d,i)}},c=function(i,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,a)},l=function(i,a,s,d){function h(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function b(C){try{_(d.next(C))}catch(L){g(L)}}function R(C){try{_(d.throw(C))}catch(L){g(L)}}function _(C){C.done?f(C.value):h(C.value).then(b,R)}_((d=d.apply(i,a||[])).next())})},p=function(i,a){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},d,h,f,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b(_){return function(C){return R([_,C])}}function R(_){if(d)throw new TypeError("Generator is already executing.");for(;s;)try{if(d=1,h&&(f=_[0]&2?h.return:_[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,_[1])).done)return f;switch(h=0,f&&(_=[_[0]&2,f.value]),_[0]){case 0:case 1:f=_;break;case 4:return s.label++,{value:_[1],done:!1};case 5:s.label++,h=_[1],_=[0];continue;case 7:_=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(_[0]===6||_[0]===2)){s=0;continue}if(_[0]===3&&(!f||_[1]>f[0]&&_[1]<f[3])){s.label=_[1];break}if(_[0]===6&&s.label<f[1]){s.label=f[1],f=_;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(_);break}f[2]&&s.ops.pop(),s.trys.pop();continue}_=a.call(i,s)}catch(C){_=[6,C],h=0}finally{d=f=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},q=function(i,a,s,d){d===void 0&&(d=s),i[d]=a[s]},v=function(i,a){for(var s in i)s!=="default"&&!a.hasOwnProperty(s)&&(a[s]=i[s])},y=function(i){var a=typeof Symbol=="function"&&Symbol.iterator,s=a&&i[a],d=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&d>=i.length&&(i=void 0),{value:i&&i[d++],done:!i}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},S=function(i,a){var s=typeof Symbol=="function"&&i[Symbol.iterator];if(!s)return i;var d=s.call(i),h,f=[],g;try{for(;(a===void 0||a-- >0)&&!(h=d.next()).done;)f.push(h.value)}catch(b){g={error:b}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(g)throw g.error}}return f},x=function(){for(var i=[],a=0;a<arguments.length;a++)i=i.concat(S(arguments[a]));return i},D=function(){for(var i=0,a=0,s=arguments.length;a<s;a++)i+=arguments[a].length;for(var d=Array(i),h=0,a=0;a<s;a++)for(var f=arguments[a],g=0,b=f.length;g<b;g++,h++)d[h]=f[g];return d},A=function(i){return this instanceof A?(this.v=i,this):new A(i)},P=function(i,a,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=s.apply(i,a||[]),h,f=[];return h={},g("next"),g("throw"),g("return"),h[Symbol.asyncIterator]=function(){return this},h;function g(T){d[T]&&(h[T]=function(M){return new Promise(function(X,j){f.push([T,M,X,j])>1||b(T,M)})})}function b(T,M){try{R(d[T](M))}catch(X){L(f[0][3],X)}}function R(T){T.value instanceof A?Promise.resolve(T.value.v).then(_,C):L(f[0][2],T)}function _(T){b("next",T)}function C(T){b("throw",T)}function L(T,M){T(M),f.shift(),f.length&&b(f[0][0],f[0][1])}},F=function(i){var a,s;return a={},d("next"),d("throw",function(h){throw h}),d("return"),a[Symbol.iterator]=function(){return this},a;function d(h,f){a[h]=i[h]?function(g){return(s=!s)?{value:A(i[h](g)),done:h==="return"}:f?f(g):g}:f}},V=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i[Symbol.asyncIterator],s;return a?a.call(i):(i=typeof y=="function"?y(i):i[Symbol.iterator](),s={},d("next"),d("throw"),d("return"),s[Symbol.asyncIterator]=function(){return this},s);function d(f){s[f]=i[f]&&function(g){return new Promise(function(b,R){g=i[f](g),h(b,R,g.done,g.value)})}}function h(f,g,b,R){Promise.resolve(R).then(function(_){f({value:_,done:b})},g)}},k=function(i,a){return Object.defineProperty?Object.defineProperty(i,"raw",{value:a}):i.raw=a,i},W=function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var s in i)Object.hasOwnProperty.call(i,s)&&(a[s]=i[s]);return a.default=i,a},O=function(i){return i&&i.__esModule?i:{default:i}},B=function(i,a){if(!a.has(i))throw new TypeError("attempted to get private field on non-instance");return a.get(i)},z=function(i,a,s){if(!a.has(i))throw new TypeError("attempted to set private field on non-instance");return a.set(i,s),s},w("__extends",t),w("__assign",r),w("__rest",n),w("__decorate",o),w("__param",u),w("__metadata",c),w("__awaiter",l),w("__generator",p),w("__exportStar",v),w("__createBinding",q),w("__values",y),w("__read",S),w("__spread",x),w("__spreadArrays",D),w("__await",A),w("__asyncGenerator",P),w("__asyncDelegator",F),w("__asyncValues",V),w("__makeTemplateObject",k),w("__importStar",W),w("__importDefault",O),w("__classPrivateFieldGet",B),w("__classPrivateFieldSet",z)})}(Wo)),At}var yr={},Cn;function Ko(){return Cn||(Cn=1,Object.defineProperty(yr,"__esModule",{value:!0})),yr}var gr={},kn;function Jo(){return kn||(kn=1,Object.defineProperty(gr,"__esModule",{value:!0})),gr}var _r={},Rn;function Xo(){return Rn||(Rn=1,Object.defineProperty(_r,"__esModule",{value:!0})),_r}var wr={},Dn;function Zo(){return Dn||(Dn=1,Object.defineProperty(wr,"__esModule",{value:!0})),wr}var ct={},$n;function Yo(){if($n)return ct;$n=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.isMsWindow=void 0;var e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function t(n){return"MSInputMethodContext"in n&&"msCrypto"in n}function r(n){if(t(n)&&n.msCrypto.subtle!==void 0){var o=n.msCrypto,u=o.getRandomValues,c=o.subtle;return e.map(function(l){return c[l]}).concat(u).every(function(l){return typeof l=="function"})}return!1}return ct.isMsWindow=r,ct}var Un;function Qo(){return Un||(Un=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=zo();t.__exportStar(Ko(),e),t.__exportStar(Jo(),e),t.__exportStar(Xo(),e),t.__exportStar(Zo(),e),t.__exportStar(Yo(),e)}(mr)),mr}var Bn;function ea(){if(Bn)return Qe;Bn=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Sha256=void 0;var e=ln(),t=gn(),r=Ho(),n=Go(),o=Qo(),u=lr,c=hr(),l=function(){function p(v){(0,n.supportsWebCrypto)((0,u.locateWindow)())?this.hash=new t.Sha256(v):(0,o.isMsWindow)((0,u.locateWindow)())?this.hash=new e.Sha256(v):this.hash=new r.Sha256(v)}return p.prototype.update=function(v,y){this.hash.update((0,c.convertToBuffer)(v))},p.prototype.digest=function(){return this.hash.digest()},p.prototype.reset=function(){this.hash.reset()},p}();return Qe.Sha256=l,Qe}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha256=e.Ie11Sha256=void 0;var t=cr;t.__exportStar(ea(),e);var r=ln();Object.defineProperty(e,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var n=gn();Object.defineProperty(e,"WebCryptoSha256",{enumerable:!0,get:function(){return n.Sha256}})})(on);var ve=function(){return ve=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},ve.apply(this,arguments)};function Pe(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,u;n<o;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))}var Et={},Ln={get exports(){return Et},set exports(e){Et=e}},Mn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(Mn){var Nn=new Uint8Array(16);Ln.exports=function(){return Mn(Nn),Nn}}else{var Fn=new Array(16);Ln.exports=function(){for(var t=0,r;t<16;t++)t&3||(r=Math.random()*4294967296),Fn[t]=r>>>((t&3)<<3)&255;return Fn}}for(var Hn=[],jt=0;jt<256;++jt)Hn[jt]=(jt+256).toString(16).substr(1);function ta(e,t){var r=t||0,n=Hn;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}var Vn=ta,ra=Et,na=Vn,qn,br,Sr=0,Or=0;function ia(e,t,r){var n=t&&r||0,o=t||[];e=e||{};var u=e.node||qn,c=e.clockseq!==void 0?e.clockseq:br;if(u==null||c==null){var l=ra();u==null&&(u=qn=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),c==null&&(c=br=(l[6]<<8|l[7])&16383)}var p=e.msecs!==void 0?e.msecs:new Date().getTime(),v=e.nsecs!==void 0?e.nsecs:Or+1,y=p-Sr+(v-Or)/1e4;if(y<0&&e.clockseq===void 0&&(c=c+1&16383),(y<0||p>Sr)&&e.nsecs===void 0&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Sr=p,Or=v,br=c,p+=122192928e5;var S=((p&268435455)*1e4+v)%4294967296;o[n++]=S>>>24&255,o[n++]=S>>>16&255,o[n++]=S>>>8&255,o[n++]=S&255;var x=p/4294967296*1e4&268435455;o[n++]=x>>>8&255,o[n++]=x&255,o[n++]=x>>>24&15|16,o[n++]=x>>>16&255,o[n++]=c>>>8|128,o[n++]=c&255;for(var D=0;D<6;++D)o[n+D]=u[D];return t||na(o)}var oa=ia,aa=Et,sa=Vn;function ua(e,t,r){var n=t&&r||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||aa)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t)for(var u=0;u<16;++u)t[n+u]=o[u];return t||sa(o)}var ca=ua,fa=oa,Gn=ca,Pr=Gn;Pr.v1=fa,Pr.v4=Gn;var Ie=Pr;/*!
 * Core functionality for Snowplow JavaScript trackers v3.8.0 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */var la="3.8.0";function da(e){if(!e)return e;var t=4-e.length%4;switch(t){case 2:e+="==";break;case 3:e+="=";break}var r=e.replace(/-/g,"+").replace(/_/g,"/");return va(r)}function ha(e){if(!e)return e;var t=pa(e);return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function pa(e){var t,r,n,o,u,c,l,p,v=0,y=0,S=[];if(!e)return e;e=unescape(encodeURIComponent(e));do t=e.charCodeAt(v++),r=e.charCodeAt(v++),n=e.charCodeAt(v++),p=t<<16|r<<8|n,o=p>>18&63,u=p>>12&63,c=p>>6&63,l=p&63,S[y++]=xe.charAt(o)+xe.charAt(u)+xe.charAt(c)+xe.charAt(l);while(v<e.length);var x=S.join(""),D=e.length%3;return(D?x.slice(0,D-3):x)+"===".slice(D||3)}function va(e){var t=function(A){return decodeURIComponent(A.split("").map(function(P){return"%"+("00"+P.charCodeAt(0).toString(16)).slice(-2)}).join(""))},r,n,o,u,c,l,p,v,y=0,S=0,x="",D=[];if(!e)return e;e+="";do u=xe.indexOf(e.charAt(y++)),c=xe.indexOf(e.charAt(y++)),l=xe.indexOf(e.charAt(y++)),p=xe.indexOf(e.charAt(y++)),v=u<<18|c<<12|l<<6|p,r=v>>16&255,n=v>>8&255,o=v&255,l===64?D[S++]=String.fromCharCode(r):p===64?D[S++]=String.fromCharCode(r,n):D[S++]=String.fromCharCode(r,n,o);while(y<e.length);return x=D.join(""),t(x.replace(/\0+$/,""))}function ft(){var e={},t=[],r=[],n=[],o,u=function(v,y){y!=null&&y!==""&&(e[v]=y)},c=function(v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&u(y,v[y])},l=function(v,y,S){if(S&&Wn(S)){var x={keyIfEncoded:v,keyIfNotEncoded:y,json:S};r.push(x),t.push(x)}},p=function(v){n.push(v)};return{add:u,addDict:c,addJson:l,addContextEntity:p,getPayload:function(){return e},getJson:function(){return t},withJsonProcessor:function(v){o=v},build:function(){return o==null||o(this,r,n),e}}}function ma(e){return function(t,r,n){for(var o=function(x,D,A){var P=JSON.stringify(x);e?t.add(D,ha(P)):t.add(A,P)},u=function(){var x=t.getPayload();if(e?x.cx:x.co)return JSON.parse(e?da(x.cx):x.co)},c=function(x,D){var A=x||u();return A?A.data=A.data.concat(D.data):A=D,A},l=void 0,p=0,v=r;p<v.length;p++){var y=v[p];y.keyIfEncoded==="cx"?l=c(l,y.json):o(y.json,y.keyIfEncoded,y.keyIfNotEncoded)}if(r.length=0,n.length){var S={schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:Pe([],n,!0)};l=c(l,S),n.length=0}l&&o(l,"cx","co")}}function Wn(e){if(!zn(e))return!1;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function zn(e){return typeof e<"u"&&e!==null&&(e.constructor==={}.constructor||e.constructor===[].constructor)}var Ct="Snowplow: ",we;(function(e){e[e.none=0]="none",e[e.error=1]="error",e[e.warn=2]="warn",e[e.debug=3]="debug",e[e.info=4]="info"})(we||(we={}));var fe=ya();function ya(e){e===void 0&&(e=we.warn);function t(c){we[c]?e=c:e=we.warn}function r(c,l){for(var p=[],v=2;v<arguments.length;v++)p[v-2]=arguments[v];if(e>=we.error&&typeof console<"u"){var y=Ct+c+`
`;l?console.error.apply(console,Pe([y+`
`,l],p,!1)):console.error.apply(console,Pe([y],p,!1))}}function n(c,l){for(var p=[],v=2;v<arguments.length;v++)p[v-2]=arguments[v];if(e>=we.warn&&typeof console<"u"){var y=Ct+c;l?console.warn.apply(console,Pe([y+`
`,l],p,!1)):console.warn.apply(console,Pe([y],p,!1))}}function o(c){for(var l=[],p=1;p<arguments.length;p++)l[p-1]=arguments[p];e>=we.debug&&typeof console<"u"&&console.debug.apply(console,Pe([Ct+c],l,!1))}function u(c){for(var l=[],p=1;p<arguments.length;p++)l[p-1]=arguments[p];e>=we.info&&typeof console<"u"&&console.info.apply(console,Pe([Ct+c],l,!1))}return{setLogLevel:t,warn:n,error:r,debug:o,info:u}}function ga(){var e=[],t=[],r=function(n){var o=xa(n),u=Ta(n),c=[],l=xr(e,n,u,o);c.push.apply(c,l);var p=Ca(t,n,u,o);return c.push.apply(c,p),c};return{getGlobalPrimitives:function(){return e},getConditionalProviders:function(){return t},addGlobalContexts:function(n){for(var o=[],u=[],c=0,l=n;c<l.length;c++){var p=l[c];Qn(p)?o.push(p):qe(p)&&u.push(p)}e=e.concat(u),t=t.concat(o)},clearGlobalContexts:function(){t=[],e=[]},removeGlobalContexts:function(n){for(var o=function(p){Qn(p)?t=t.filter(function(v){return JSON.stringify(v)!==JSON.stringify(p)}):qe(p)&&(e=e.filter(function(v){return JSON.stringify(v)!==JSON.stringify(p)}))},u=0,c=n;u<c.length;u++){var l=c[u];o(l)}},getApplicableContexts:function(n){return r(n)}}}function _a(e){return{addPluginContexts:function(t){var r=t?Pe([],t,!0):[];return e.forEach(function(n){try{n.contexts&&r.push.apply(r,n.contexts())}catch(o){fe.error("Error adding plugin contexts",o)}}),r}}}function wa(e){var t=new RegExp("^iglu:([a-zA-Z0-9-_.]+)/([a-zA-Z0-9-_]+)/jsonschema/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$"),r=t.exec(e);if(r!==null)return r.slice(1,6)}function ba(e){if(e[0]==="*"||e[1]==="*")return!1;if(e.slice(2).length>0){for(var t=!1,r=0,n=e.slice(2);r<n.length;r++){var o=n[r];if(o==="*")t=!0;else if(t)return!1}return!0}else if(e.length==2)return!0;return!1}function Kn(e){var t=e.split(".");return t&&t.length>1?ba(t):!1}function Jn(e){var t=new RegExp("^iglu:((?:(?:[a-zA-Z0-9-_]+|\\*).)+(?:[a-zA-Z0-9-_]+|\\*))/([a-zA-Z0-9-_.]+|\\*)/jsonschema/([1-9][0-9]*|\\*)-(0|[1-9][0-9]*|\\*)-(0|[1-9][0-9]*|\\*)$"),r=t.exec(e);if(r!==null&&Kn(r[1]))return r.slice(1,6)}function Ir(e){var t=Jn(e);if(t){var r=t[0];return t.length===5&&Kn(r)}return!1}function Sa(e){return Array.isArray(e)&&e.every(function(t){return typeof t=="string"})}function Xn(e){return Sa(e)?e.every(function(t){return Ir(t)}):typeof e=="string"?Ir(e):!1}function lt(e){var t=e;return Wn(t)&&"schema"in t&&"data"in t?typeof t.schema=="string"&&typeof t.data=="object":!1}function Oa(e){var t=e,r=0;if(e!=null&&typeof e=="object"&&!Array.isArray(e)){if(Object.prototype.hasOwnProperty.call(t,"accept"))if(Xn(t.accept))r+=1;else return!1;if(Object.prototype.hasOwnProperty.call(t,"reject"))if(Xn(t.reject))r+=1;else return!1;return r>0&&r<=2}return!1}function kt(e){return typeof e=="function"&&e.length<=1}function qe(e){return kt(e)||lt(e)}function Zn(e){return Array.isArray(e)&&e.length===2?Array.isArray(e[1])?kt(e[0])&&e[1].every(qe):kt(e[0])&&qe(e[1]):!1}function Yn(e){return Array.isArray(e)&&e.length===2&&Oa(e[0])?Array.isArray(e[1])?e[1].every(qe):qe(e[1]):!1}function Qn(e){return Zn(e)||Yn(e)}function Pa(e,t){var r=0,n=0,o=e.accept;Array.isArray(o)?e.accept.some(function(c){return Rt(c,t)})&&n++:typeof o=="string"&&Rt(o,t)&&n++;var u=e.reject;return Array.isArray(u)?e.reject.some(function(c){return Rt(c,t)})&&r++:typeof u=="string"&&Rt(u,t)&&r++,n>0&&r===0?!0:(n===0&&r>0,!1)}function Rt(e,t){if(!Ir(e))return!1;var r=Jn(e),n=wa(t);if(r&&n){if(!Ia(r[0],n[0]))return!1;for(var o=1;o<5;o++)if(!ei(r[o],n[o]))return!1;return!0}return!1}function Ia(e,t){var r=t.split("."),n=e.split(".");if(r&&n){if(r.length!==n.length)return!1;for(var o=0;o<n.length;o++)if(!ei(r[o],n[o]))return!1;return!0}return!1}function ei(e,t){return e&&t&&e==="*"||e===t}function xa(e){for(var t=e.getJson(),r=0,n=t;r<n.length;r++){var o=n[r];if(o.keyIfEncoded==="ue_px"&&typeof o.json.data=="object"){var u=o.json.data.schema;if(typeof u=="string")return u}}return""}function Ta(e){var t=e.getPayload().e;return typeof t=="string"?t:""}function Aa(e,t,r,n){var o=void 0;try{var u={event:t.getPayload(),eventType:r,eventSchema:n};return o=e(u),Array.isArray(o)&&o.every(lt)||lt(o)?o:void 0}catch{o=void 0}return o}function ti(e){return Array.isArray(e)?e:Array.of(e)}function xr(e,t,r,n){var o,u=ti(e),c=function(p){var v=Ea(p,t,r,n);if(v&&v.length!==0)return v},l=u.map(c);return(o=[]).concat.apply(o,l.filter(function(p){return p!=null&&p.filter(Boolean)}))}function Ea(e,t,r,n){if(lt(e))return[e];if(kt(e)){var o=Aa(e,t,r,n);if(lt(o))return[o];if(Array.isArray(o))return o}}function ja(e,t,r,n){if(Zn(e)){var o=e[0],u=!1;try{var c={event:t.getPayload(),eventType:r,eventSchema:n};u=o(c)}catch{u=!1}if(u===!0)return xr(e[1],t,r,n)}else if(Yn(e)&&Pa(e[0],n))return xr(e[1],t,r,n);return[]}function Ca(e,t,r,n){var o,u=ti(e),c=function(p){var v=ja(p,t,r,n);if(v&&v.length!==0)return v},l=u.map(c);return(o=[]).concat.apply(o,l.filter(function(p){return p!=null&&p.filter(Boolean)}))}function ka(e){return e==null?{type:"dtm",value:new Date().getTime()}:typeof e=="number"?{type:"dtm",value:e}:e.type==="ttm"?{type:"ttm",value:e.value}:{type:"dtm",value:e.value||new Date().getTime()}}function Ra(e){e===void 0&&(e={});function t(p,v,y){var S=_a(v),x=ga(),D=p,A={};function P(O){if(O&&O.length)return{schema:"iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",data:O}}function F(O,B){var z=x.getApplicableContexts(O),q=[];return B&&B.length&&q.push.apply(q,B),z&&z.length&&q.push.apply(q,z),q}function V(O,B,z){O.withJsonProcessor(ma(D)),O.add("eid",Ie.v4()),O.addDict(A);var q=ka(z);O.add(q.type,q.value.toString());var w=F(O,S.addPluginContexts(B)),G=P(w);G!==void 0&&O.addJson("cx","co",G),v.forEach(function(a){try{a.beforeTrack&&a.beforeTrack(O)}catch(s){fe.error("Plugin beforeTrack",s)}}),typeof y=="function"&&y(O);var i=O.build();return v.forEach(function(a){try{a.afterTrack&&a.afterTrack(i)}catch(s){fe.error("Plugin afterTrack",s)}}),i}function k(O,B){A[O]=B}var W={track:V,addPayloadPair:k,getBase64Encoding:function(){return D},setBase64Encoding:function(O){D=O},addPayloadDict:function(O){for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&(A[B]=O[B])},resetPayloadPairs:function(O){A=zn(O)?O:{}},setTrackerVersion:function(O){k("tv",O)},setTrackerNamespace:function(O){k("tna",O)},setAppId:function(O){k("aid",O)},setPlatform:function(O){k("p",O)},setUserId:function(O){k("uid",O)},setScreenResolution:function(O,B){k("res",O+"x"+B)},setViewport:function(O,B){k("vp",O+"x"+B)},setColorDepth:function(O){k("cd",O)},setTimezone:function(O){k("tz",O)},setLang:function(O){k("lang",O)},setIpAddress:function(O){k("ip",O)},setUseragent:function(O){k("ua",O)},addGlobalContexts:function(O){x.addGlobalContexts(O)},clearGlobalContexts:function(){x.clearGlobalContexts()},removeGlobalContexts:function(O){x.removeGlobalContexts(O)}};return W}var r=e.base64,n=e.corePlugins,o=e.callback,u=n??[],c=t(r??!0,u,o),l=ve(ve({},c),{addPlugin:function(p){var v,y,S=p.plugin;u.push(S),(v=S.logger)===null||v===void 0||v.call(S,fe),(y=S.activateCorePlugin)===null||y===void 0||y.call(S,l)}});return u==null||u.forEach(function(p){var v,y;(v=p.logger)===null||v===void 0||v.call(p,fe),(y=p.activateCorePlugin)===null||y===void 0||y.call(p,l)}),l}function Tr(e){var t=e.event,r=t.schema,n=t.data,o=ft(),u={schema:"iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",data:{schema:r,data:n}};return o.add("e","ue"),o.addJson("ue_px","ue_pr",u),o}function Da(e){var t=e.pageUrl,r=e.pageTitle,n=e.referrer,o=ft();return o.add("e","pv"),o.add("url",t),o.add("page",r),o.add("refr",n),o}function $a(e){var t=e.pageUrl,r=e.pageTitle,n=e.referrer,o=e.minXOffset,u=e.maxXOffset,c=e.minYOffset,l=e.maxYOffset,p=ft();return p.add("e","pp"),p.add("url",t),p.add("page",r),p.add("refr",n),o&&!isNaN(Number(o))&&p.add("pp_mix",o.toString()),u&&!isNaN(Number(u))&&p.add("pp_max",u.toString()),c&&!isNaN(Number(c))&&p.add("pp_miy",c.toString()),l&&!isNaN(Number(l))&&p.add("pp_may",l.toString()),p}function Ua(e){var t=e.orderId,r=e.total,n=e.affiliation,o=e.tax,u=e.shipping,c=e.city,l=e.state,p=e.country,v=e.currency,y=ft();return y.add("e","tr"),y.add("tr_id",t),y.add("tr_af",n),y.add("tr_tt",r),y.add("tr_tx",o),y.add("tr_sh",u),y.add("tr_ci",c),y.add("tr_st",l),y.add("tr_co",p),y.add("tr_cu",v),y}function Ba(e){var t=e.orderId,r=e.sku,n=e.price,o=e.name,u=e.category,c=e.quantity,l=e.currency,p=ft();return p.add("e","ti"),p.add("ti_id",t),p.add("ti_sk",r),p.add("ti_nm",o),p.add("ti_ca",u),p.add("ti_pr",n),p.add("ti_qu",c),p.add("ti_cu",l),p}function La(e){var t=e.sku,r=e.quantity,n=e.name,o=e.category,u=e.unitPrice,c=e.currency;return Tr({event:{schema:"iglu:com.snowplowanalytics.snowplow/add_to_cart/jsonschema/1-0-0",data:ri({sku:t,quantity:r,name:n,category:o,unitPrice:u,currency:c})}})}function Ma(e){var t=e.sku,r=e.quantity,n=e.name,o=e.category,u=e.unitPrice,c=e.currency;return Tr({event:{schema:"iglu:com.snowplowanalytics.snowplow/remove_from_cart/jsonschema/1-0-0",data:ri({sku:t,quantity:r,name:n,category:o,unitPrice:u,currency:c})}})}function ri(e,t){t===void 0&&(t={});var r={};for(var n in e)(t[n]||e[n]!==null&&typeof e[n]<"u")&&(r[n]=e[n]);return r}var Na=la,Ar={},Fa={get exports(){return Ar},set exports(e){Ar=e}},Er={},Ha={get exports(){return Er},set exports(e){Er=e}};(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(r,n){return r<<n|r>>>32-n},rotr:function(r,n){return r<<32-n|r>>>n},endian:function(r){if(r.constructor==Number)return t.rotl(r,8)&16711935|t.rotl(r,24)&4278255360;for(var n=0;n<r.length;n++)r[n]=t.endian(r[n]);return r},randomBytes:function(r){for(var n=[];r>0;r--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(r){for(var n=[],o=0,u=0;o<r.length;o++,u+=8)n[u>>>5]|=r[o]<<24-u%32;return n},wordsToBytes:function(r){for(var n=[],o=0;o<r.length*32;o+=8)n.push(r[o>>>5]>>>24-o%32&255);return n},bytesToHex:function(r){for(var n=[],o=0;o<r.length;o++)n.push((r[o]>>>4).toString(16)),n.push((r[o]&15).toString(16));return n.join("")},hexToBytes:function(r){for(var n=[],o=0;o<r.length;o+=2)n.push(parseInt(r.substr(o,2),16));return n},bytesToBase64:function(r){for(var n=[],o=0;o<r.length;o+=3)for(var u=r[o]<<16|r[o+1]<<8|r[o+2],c=0;c<4;c++)o*8+c*6<=r.length*8?n.push(e.charAt(u>>>6*(3-c)&63)):n.push("=");return n.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],o=0,u=0;o<r.length;u=++o%4)u!=0&&n.push((e.indexOf(r.charAt(o-1))&Math.pow(2,-2*u+8)-1)<<u*2|e.indexOf(r.charAt(o))>>>6-u*2);return n}};Ha.exports=t})();var jr={utf8:{stringToBytes:function(e){return jr.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(jr.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r)&255);return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}},ni=jr;(function(){var e=Er,t=ni.utf8,r=ni.bin,n=function(u){u.constructor==String?u=t.stringToBytes(u):typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(u)?u=Array.prototype.slice.call(u,0):Array.isArray(u)||(u=u.toString());var c=e.bytesToWords(u),l=u.length*8,p=[],v=1732584193,y=-271733879,S=-1732584194,x=271733878,D=-1009589776;c[l>>5]|=128<<24-l%32,c[(l+64>>>9<<4)+15]=l;for(var A=0;A<c.length;A+=16){for(var P=v,F=y,V=S,k=x,W=D,O=0;O<80;O++){if(O<16)p[O]=c[A+O];else{var B=p[O-3]^p[O-8]^p[O-14]^p[O-16];p[O]=B<<1|B>>>31}var z=(v<<5|v>>>27)+D+(p[O]>>>0)+(O<20?(y&S|~y&x)+1518500249:O<40?(y^S^x)+1859775393:O<60?(y&S|y&x|S&x)-1894007588:(y^S^x)-899497514);D=x,x=S,S=y<<30|y>>>2,y=v,v=z}v+=P,y+=F,S+=V,x+=k,D+=W}return[v,y,S,x,D]},o=function(u,c){var l=e.wordsToBytes(n(u));return c&&c.asBytes?l:c&&c.asString?r.bytesToString(l):e.bytesToHex(l)};o._blocksize=16,o._digestsize=20,Fa.exports=o})();/*!
 * Core functionality for Snowplow Browser trackers v3.8.0 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */function Va(){try{return!!window.localStorage}catch{return!0}}function qa(){var e="modernizr";if(!Va())return!1;try{var t=window.localStorage;return t.setItem(e,e),t.removeItem(e),!0}catch{return!1}}function Ga(){var e,t;if("innerWidth"in window)e=window.innerWidth,t=window.innerHeight;else{var r=document.documentElement||document.body;e=r.clientWidth,t=r.clientHeight}return e>=0&&t>=0?e+"x"+t:null}function Wa(){var e=document.documentElement,t=document.body,r=t?Math.max(t.offsetHeight,t.scrollHeight):0,n=Math.max(e.clientWidth,e.offsetWidth,e.scrollWidth),o=Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight,r);return isNaN(n)||isNaN(o)?"":n+"x"+o}function ii(e){return!!(e&&typeof e.valueOf()=="string")}function oi(e){return Number.isInteger&&Number.isInteger(e)||typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function ai(e){if(!ii(e)){e=e.text||"";var t=document.getElementsByTagName("title");t&&t[0]!=null&&(e=t[0].text)}return e}function Cr(e){var t=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)"),r=t.exec(e);return r?r[1]:e}function si(e){var t=e.length;return e.charAt(--t)==="."&&(e=e.slice(0,t)),e.slice(0,2)==="*."&&(e=e.slice(1)),e}function kr(e){var t=window,r=dt("referrer",t.location.href)||dt("referer",t.location.href);if(r)return r;if(e)return e;try{if(t.top)return t.top.document.referrer;if(t.parent)return t.parent.document.referrer}catch{}return document.referrer}function Te(e,t,r,n){if(e.addEventListener)return e.addEventListener(t,r,n),!0;if(e.attachEvent)return e.attachEvent("on"+t,r);e["on"+t]=r}function dt(e,t){var r=new RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(t);return r?decodeURIComponent(r[1].replace(/\+/g," ")):null}function za(e,t,r){var n=t+"="+r,o=e.split("#"),u=o[0].split("?"),c=u.shift(),l=u.join("?");if(!l)l=n;else{for(var p=!0,v=l.split("&"),y=0;y<v.length;y++)if(v[y].substr(0,t.length+1)===t+"="){p=!1,v[y]=n,l=v.join("&");break}p&&(l=n+"&"+l)}return o[0]=c+"?"+l,o.join("#")}function Ka(e){try{var t=window.localStorage,r=t.getItem(e+".expires");if(r===null||+r>Date.now())return t.getItem(e);t.removeItem(e),t.removeItem(e+".expires");return}catch{return}}function Dt(e,t,r){r===void 0&&(r=63072e3);try{var n=window.localStorage,o=Date.now()+r*1e3;return n.setItem("".concat(e,".expires"),o.toString()),n.setItem(e,t),!0}catch{return!1}}function ui(e){try{var t=window.localStorage;return t.removeItem(e),t.removeItem(e+".expires"),!0}catch{return!1}}function Ja(e,t){for(var r=window.location.hostname,n="_sp_root_domain_test_",o=n+new Date().getTime(),u="_test_value_"+new Date().getTime(),c=r.split("."),l=c.length-1;l>=0;){var p=c.slice(l,c.length).join(".");if(Ue(o,u,0,"/",p,e,t),Ue(o)===u){$t(o,p,e,t);for(var v=Xa(n),y=0;y<v.length;y++)$t(v[y],p,e,t);return p}l-=1}return r}function $t(e,t,r,n){Ue(e,"",-1,"/",t,r,n)}function Xa(e){for(var t=document.cookie.split("; "),r=[],n=0;n<t.length;n++)t[n].substring(0,e.length)===e&&r.push(t[n]);return r}function Ue(e,t,r,n,o,u,c){return arguments.length>1?document.cookie=e+"="+encodeURIComponent(t??"")+(r?"; Expires="+new Date(+new Date+r*1e3).toUTCString():"")+(n?"; Path="+n:"")+(o?"; Domain="+o:"")+(u?"; SameSite="+u:"")+(c?"; Secure":""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}function Za(e,t,r,n,o,u,c,l,p,v,y,S,x,D,A,P){var F=!1,V,k=[];n=typeof n=="string"?n.toLowerCase():n;var W=n===!0||n==="beacon"||n==="true",O=!!(W&&window.navigator&&window.navigator.sendBeacon&&!X(window.navigator.userAgent)),B=O&&W,z=n==="get",q=!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),w=!z&&q&&(n==="post"||W),G=w?o:"/i",i="snowplowOutQueue_".concat(e,"_").concat(w?"post2":"get");if(W&&(x={}),u=r&&qa()&&w&&u||1,r)try{var a=window.localStorage.getItem(i);k=a?JSON.parse(a):[]}catch{}Array.isArray(k)||(k=[]),t.outQueues.push(k),q&&u>1&&t.bufferFlushers.push(function(j){F||R(j)});function s(j){var H="?",U={co:!0,cx:!0},$=!0;for(var K in j)j.hasOwnProperty(K)&&!U.hasOwnProperty(K)&&($?$=!1:H+="&",H+=encodeURIComponent(K)+"="+encodeURIComponent(j[K]));for(var N in U)j.hasOwnProperty(N)&&U.hasOwnProperty(N)&&(H+="&"+N+"="+encodeURIComponent(j[N]));return H}function d(j){var H=Object.keys(j).map(function(U){return[U,j[U]]}).reduce(function(U,$){var K=$[0],N=$[1];return U[K]=N.toString(),U},{});return{evt:H,bytes:h(JSON.stringify(H))}}function h(j){for(var H=0,U=0;U<j.length;U++){var $=j.charCodeAt(U);$<=127?H+=1:$<=2047?H+=2:$>=55296&&$<=57343?(H+=4,U++):$<65535?H+=3:H+=4}return H}var f=function(j){return typeof j[0]=="object"};function g(j,H){var U=C(H,!0,!1);U.send(L(T([j.evt])))}function b(j,H){V=H+G;var U=function(je,ne){return fe.warn("Event ("+je+"B) too big, max is "+ne)};if(w){var $=d(j);if($.bytes>=c){U($.bytes,c),g($,V);return}else k.push($)}else{var K=s(j);if(l>0){var N=M(K),le=h(N);if(le>=l){if(U(le,l),q){var $=d(j),ae=H+o;g($,ae)}return}}k.push(K)}var Z=!1;r&&(Z=Dt(i,JSON.stringify(k.slice(0,v)))),!F&&(!Z||k.length>=u)&&R()}function R(j){for(j===void 0&&(j=!1);k.length&&typeof k[0]!="string"&&typeof k[0]!="object";)k.shift();if(k.length<1){F=!1;return}if(!ii(V))throw"No collector configured";if(F=!0,q){var H=function(ie){for(var Oe=0,Ht=0;Oe<ie.length&&(Ht+=ie[Oe].bytes,!(Ht>=c));)Oe+=1;return Oe},U=void 0,$,K;f(k)?(U=V,$=C(U,!0,j),K=H(k)):(U=M(k[0]),$=C(U,!1,j),K=1);var N=setTimeout(function(){$.abort(),F=!1},y),le=function(ie){for(var Oe=0;Oe<ie;Oe++)k.shift();r&&Dt(i,JSON.stringify(k.slice(0,v)))},ae=function(ie){le(ie),R()};if($.onreadystatechange=function(){$.readyState===4&&$.status>=200&&(clearTimeout(N),$.status<300?ae(K):(_($.status)||(fe.error("Status ".concat($.status,", will not retry.")),le(K)),F=!1))},!f(k))$.send();else{var Z=k.slice(0,K);if(Z.length>0){var je=!1,ne=Z.map(function(ie){return ie.evt});if(B){var Ne=new Blob([L(T(ne))],{type:"application/json"});try{je=navigator.sendBeacon(U,Ne)}catch{je=!1}}je===!0?ae(K):$.send(L(T(ne)))}}}else if(!S&&!f(k)){var Ce=new Image(1,1),ke=!0;Ce.onload=function(){ke&&(ke=!1,k.shift(),r&&Dt(i,JSON.stringify(k.slice(0,v))),R())},Ce.onerror=function(){ke&&(ke=!1,F=!1)},Ce.src=M(k[0]),setTimeout(function(){ke&&F&&(ke=!1,R())},y)}else F=!1}function _(j){return j>=200&&j<300?!1:A.includes(j)?!0:!P.includes(j)}function C(j,H,U){var $=new XMLHttpRequest;H?($.open("POST",j,!U),$.setRequestHeader("Content-Type","application/json; charset=UTF-8")):$.open("GET",j,!U),$.withCredentials=D,S&&$.setRequestHeader("SP-Anonymous","*");for(var K in x)Object.prototype.hasOwnProperty.call(x,K)&&$.setRequestHeader(K,x[K]);return $}function L(j){return JSON.stringify({schema:"iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",data:j})}function T(j){for(var H=new Date().getTime().toString(),U=0;U<j.length;U++)j[U].stm=H;return j}function M(j){return p?V+j.replace("?","?stm="+new Date().getTime()+"&"):V+j}return{enqueueRequest:b,executeQueue:function(){F||R()},setUseLocalStorage:function(j){r=j},setAnonymousTracking:function(j){S=j},setCollectorUrl:function(j){V=j+G},setBufferSize:function(j){u=j}};function X(j){return H(13,j)||U(10,15,j)&&$(j);function H(N,le){var ae=le.match("(iP.+; CPU .*OS (d+)[_d]*.*) AppleWebKit/");return ae&&ae.length?parseInt(ae[0])<=N:!1}function U(N,le,ae){var Z=ae.match("(Macintosh;.*Mac OS X (d+)_(d+)[_d]*.*) AppleWebKit/");return Z&&Z.length?parseInt(Z[0])<=N||parseInt(Z[0])===N&&parseInt(Z[1])<=le:!1}function $(N){return N.match("Version/.* Safari/")&&!K(N)}function K(N){return N.match("Chrom(e|ium)")}}}function Ya(e,t){var r=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+))([?][^#]+)"),n=r.exec(e);return n&&(n==null?void 0:n.length)>1?dt(t,n[1]):null}function ci(e,t,r){var n;return e==="translate.googleusercontent.com"?(r===""&&(r=t),t=(n=Ya(t,"u"))!==null&&n!==void 0?n:"",e=Cr(t)):(e==="cc.bingj.com"||e==="webcache.googleusercontent.com")&&(t=document.links[0].href,e=Cr(t)),[e,t,r]}var fi=0,Be=1,Qa=2,ht=3,Rr=4,li=5,Ae=6,Ge=7,Le=8,Me=9,Ee=10;function es(){var e=["1","",0,0,0,void 0,"","","",void 0,0];return e}function ts(e,t,r,n){var o=new Date,u=Math.round(o.getTime()/1e3),c;e?(c=e.split("."),c.unshift("0")):c=["1",t,u,n,u,"",r],(!c[Ae]||c[Ae]==="undefined")&&(c[Ae]=Ie.v4()),(!c[Ge]||c[Ge]==="undefined")&&(c[Ge]=""),(!c[Le]||c[Le]==="undefined")&&(c[Le]=""),(!c[Me]||c[Me]==="undefined")&&(c[Me]=""),(!c[Ee]||c[Ee]==="undefined")&&(c[Ee]=0);var l=function(y,S){var x=parseInt(y);return isNaN(x)?S:x},p=function(y){return y?l(y,void 0):void 0},v=[c[fi],c[Be],l(c[Qa],u),l(c[ht],n),l(c[Rr],u),p(c[li]),c[Ae],c[Ge],c[Le],p(c[Me]),l(c[Ee],0)];return v}function rs(e,t){var r;return e[Be]?r=e[Be]:t?(r="",e[Be]=r):(r=Ie.v4(),e[Be]=r),r}function pt(e,t){t===void 0&&(t=1),Br(e)?(e[Ge]=e[Ae],e[li]=e[Rr],e[ht]++):e[ht]=t;var r=Ie.v4();return e[Ae]=r,e[Ee]=0,e[Le]="",e[Me]=void 0,r}function Dr(e){e[Rr]=Math.round(new Date().getTime()/1e3)}function ns(e,t){if(e[Ee]===0){var r=t.build();e[Le]=r.eid;var n=r.dtm||r.ttm;e[Me]=n?parseInt(n):void 0}}function is(e){e[Ee]+=1}function os(e){return e.shift(),e.join(".")}function as(e,t){var r=e[Me],n={userId:e[Be],sessionId:e[Ae],eventIndex:e[Ee],sessionIndex:e[ht],previousSessionId:e[Ge]||null,storageMechanism:t=="localStorage"?"LOCAL_STORAGE":"COOKIE_1",firstEventId:e[Le]||null,firstEventTimestamp:r?new Date(r).toISOString():null};return n}function $r(e){return e[Ae]}function ss(e){return e[Be]}function Ur(e){return e[ht]}function Br(e){return e[fi]==="0"}function us(e,t,r,n,o,u){u===void 0&&(u={});var c=[],l=function(y,S,x,D,A,P){var F,V,k,W,O,B,z,q,w,G,i,a,s,d,h,f,g,b,R,_,C,L,T,M,X,j;P.eventMethod=(F=P.eventMethod)!==null&&F!==void 0?F:"post";var H=function(m){var I;return(I=m.stateStorageStrategy)!==null&&I!==void 0?I:"cookieAndLocalStorage"},U=function(m){var I,E;return typeof m.anonymousTracking=="boolean"?!1:(E=((I=m.anonymousTracking)===null||I===void 0?void 0:I.withSessionTracking)===!0)!==null&&E!==void 0?E:!1},$=function(m){var I,E;return typeof m.anonymousTracking=="boolean"?!1:(E=((I=m.anonymousTracking)===null||I===void 0?void 0:I.withServerAnonymisation)===!0)!==null&&E!==void 0?E:!1},K=function(m){return!!m.anonymousTracking};c.push(qu()),(!((k=(V=P==null?void 0:P.contexts)===null||V===void 0?void 0:V.webPage)!==null&&k!==void 0)||k)&&c.push(Vu()),c.push.apply(c,(W=P.plugins)!==null&&W!==void 0?W:[]);var N=Ra({base64:P.encodeBase64,corePlugins:c,callback:Nu}),le=navigator.userLanguage||navigator.language,ae=document.characterSet||document.charset,Z=ci(window.location.hostname,window.location.href,kr()),je=si(Z[0]),ne=Z[1],Ne=Z[2],Ce,ke=(O=P.platform)!==null&&O!==void 0?O:"web",ie=eo(D),Oe=(B=P.postPath)!==null&&B!==void 0?B:"/com.snowplowanalytics.snowplow/tp2",Ht=(z=P.appId)!==null&&z!==void 0?z:"",Vt,We=document.title,_t,Uu=(q=P.resetActivityTrackingOnPageView)!==null&&q!==void 0?q:!0,$i,Ui,Bu=(w=P.cookieName)!==null&&w!==void 0?w:"_sp_",wt=(G=P.cookieDomain)!==null&&G!==void 0?G:void 0,Gr="/",qt=(i=P.cookieSameSite)!==null&&i!==void 0?i:"None",Gt=(a=P.cookieSecure)!==null&&a!==void 0?a:!0,Bi=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack,Li=typeof P.respectDoNotTrack<"u"?P.respectDoNotTrack&&(Bi==="yes"||Bi==="1"):!1,Wr,Mi=(s=P.cookieLifetime)!==null&&s!==void 0?s:63072e3,Ni=(d=P.sessionCookieTimeout)!==null&&d!==void 0?d:1800,ze=U(P),zr=$(P),Ke=K(P),Y=H(P),Wt,Kr=new Date().getTime(),zt,Kt,Jt,Xt,Fi,Zt,de,he=1,Fe,Re=Za(y,A,Y=="localStorage"||Y=="cookieAndLocalStorage",P.eventMethod,Oe,(h=P.bufferSize)!==null&&h!==void 0?h:1,(f=P.maxPostBytes)!==null&&f!==void 0?f:4e4,(g=P.maxGetBytes)!==null&&g!==void 0?g:0,(b=P.useStm)!==null&&b!==void 0?b:!0,(R=P.maxLocalStorageQueueSize)!==null&&R!==void 0?R:1e3,(_=P.connectionTimeout)!==null&&_!==void 0?_:5e3,zr,(C=P.customHeaders)!==null&&C!==void 0?C:{},(L=P.withCredentials)!==null&&L!==void 0?L:!0,(T=P.retryStatusCodes)!==null&&T!==void 0?T:[],((M=P.dontRetryStatusCodes)!==null&&M!==void 0?M:[]).concat([400,401,403,410,422])),Hi=!1,Vi=!1,se={enabled:!1,installed:!1,configurations:{}},Lu=(j=(X=P.contexts)===null||X===void 0?void 0:X.session)!==null&&j!==void 0?j:!1,Yt;P.hasOwnProperty("discoverRootDomain")&&P.discoverRootDomain&&(wt=Ja(qt,Gt)),N.setTrackerVersion(x),N.setTrackerNamespace(S),N.setAppId(Ht),N.setPlatform(ke),N.addPayloadPair("cookie",navigator.cookieEnabled?"1":"0"),N.addPayloadPair("cs",ae),N.addPayloadPair("lang",le),N.addPayloadPair("res",screen.width+"x"+screen.height),N.addPayloadPair("cd",screen.colorDepth),zi(),Qi(),P.crossDomainLinker&&Gi(P.crossDomainLinker);function He(){Z=ci(window.location.hostname,window.location.href,kr()),Z[1]!==ne&&(Ne=kr(ne)),je=si(Z[0]),ne=Z[1]}function qi(m){var I=new Date().getTime(),E=m.currentTarget;E!=null&&E.href&&(E.href=za(E.href,"_sp",Zt+"."+I))}function Gi(m){for(var I=0;I<document.links.length;I++){var E=document.links[I];!E.spDecorationEnabled&&m(E)&&(Te(E,"click",qi,!0),Te(E,"mousedown",qi,!0),E.spDecorationEnabled=!0)}}function Ve(m){var I;return $i&&(I=new RegExp("#.*"),m=m.replace(I,"")),Ui&&(I=new RegExp("[{}]","g"),m=m.replace(I,"")),m}function Wi(m){var I=new RegExp("^([a-z]+):"),E=I.exec(m);return E?E[1]:null}function Mu(m,I){var E=Wi(I),ee;return E?I:I.slice(0,1)==="/"?Wi(m)+"://"+Cr(m)+I:(m=Ve(m),(ee=m.indexOf("?"))>=0&&(m=m.slice(0,ee)),(ee=m.lastIndexOf("/"))!==m.length-1&&(m=m.slice(0,ee+1)),m+I)}function Nu(m){Li||Yt||Re.enqueueRequest(m.build(),ie)}function Je(m){return Bu+m+"."+Fi}function Jr(m){var I=Je(m);if(Y=="localStorage")return Ka(I);if(Y=="cookie"||Y=="cookieAndLocalStorage")return Ue(I)}function zi(){He(),Fi=Ar((wt||je)+(Gr||"/")).slice(0,4)}function bt(){var m=new Date;Wt=m.getTime()}function Fu(){Hu(),bt()}function Ki(){var m=document.documentElement;return m?[m.scrollLeft||window.pageXOffset,m.scrollTop||window.pageYOffset]:[0,0]}function Ji(){var m=Ki(),I=m[0];zt=I,Kt=I;var E=m[1];Jt=E,Xt=E}function Hu(){var m=Ki(),I=m[0];I<zt?zt=I:I>Kt&&(Kt=I);var E=m[1];E<Jt?Jt=E:E>Xt&&(Xt=E)}function Qt(m){return Math.round(m)}function er(){var m=Je("ses"),I="*";Xi(m,I,Ni)}function Xr(m){var I=Je("id"),E=os(m);Xi(I,E,Mi)}function Xi(m,I,E){Ke&&!ze||(Y=="localStorage"?Dt(m,I,E):(Y=="cookie"||Y=="cookieAndLocalStorage")&&Ue(m,I,E,Gr,wt,qt,Gt))}function Zi(m){var I=Je("id"),E=Je("ses");ui(I),ui(E),$t(I,wt,qt,Gt),$t(E,wt,qt,Gt),m!=null&&m.preserveSession||(de=Ie.v4(),he=1),m!=null&&m.preserveUser||(Zt=Ie.v4(),Fe=null)}function Yi(m){m&&m.stateStorageStrategy&&(P.stateStorageStrategy=m.stateStorageStrategy,Y=H(P)),Ke=K(P),ze=U(P),zr=$(P),Re.setUseLocalStorage(Y=="localStorage"||Y=="cookieAndLocalStorage"),Re.setAnonymousTracking(zr)}function Qi(){if(!(Ke&&!ze)){var m=Y!="none"&&!!Jr("ses"),I=St();Zt=rs(I,Ke),m?de=$r(I):de=pt(I),he=Ur(I),Y!="none"&&(er(),Dr(I),Xr(I))}}function St(){if(Y=="none")return es();var m=Jr("id")||void 0;return ts(m,Zt,de,he)}function eo(m){return m.indexOf("http")===0?m:(document.location.protocol==="https:"?"https":"http")+"://"+m}function to(){(!Hi||A.pageViewId==null)&&(A.pageViewId=Ie.v4())}function Zr(){return A.pageViewId==null&&(A.pageViewId=Ie.v4()),A.pageViewId}function Vu(){return{contexts:function(){return[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:Zr()}}]}}}function qu(){var m=function(E){return Ke?null:E},I=function(E){return ze?E:m(E)};return{beforeTrack:function(E){var ee=Jr("ses"),Q=St();if(Wr?Yt=!!Ue(Wr):Yt=!1,Li||Yt){Zi();return}Br(Q)?(!ee&&Y!="none"?de=pt(Q):de=$r(Q),he=Ur(Q)):new Date().getTime()-Kr>Ni*1e3&&(he++,de=pt(Q,he)),Dr(Q),ns(Q,E),is(Q),E.add("vp",Ga()),E.add("ds",Wa()),E.add("vid",I(he)),E.add("sid",I(de)),E.add("duid",m(ss(Q))),E.add("uid",m(Fe)),He(),E.add("refr",Ve(Ce||Ne)),E.add("url",Ve(Vt||ne)),Lu&&!ze&&!Ke&&Gu(E,as(Q,Y)),Y!="none"&&(Xr(Q),er()),Kr=new Date().getTime()}}}function Gu(m,I){var E={schema:"iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",data:I};m.addContextEntity(E)}function Wu(){var m=St();Br(m)?(Y!="none"?de=pt(m):de=$r(m),he=Ur(m),er()):(he++,de=pt(m,he)),Dr(m),Y!="none"&&(Xr(m),er()),Kr=new Date().getTime()}function Yr(m,I){return(m||[]).concat(I?I():[])}function zu(m){var I=m.title,E=m.context,ee=m.timestamp,Q=m.contextCallback;He(),Vi&&to(),Vi=!0,We=document.title,_t=I;var Xe=ai(_t||We);N.track(Da({pageUrl:Ve(Vt||ne),pageTitle:Xe,referrer:Ve(Ce||Ne)}),Yr(E,Q),ee);var me=new Date,tr=!1;if(se.enabled&&!se.installed){se.installed=!0,tr=!0;var Qr={update:function(){if(typeof window<"u"&&typeof window.addEventListener=="function"){var Ze=!1,rr=Object.defineProperty({},"passive",{get:function(){Ze=!0},set:function(){}}),oo=function(){};window.addEventListener("testPassiveEventSupport",oo,rr),window.removeEventListener("testPassiveEventSupport",oo,rr),Qr.hasSupport=Ze}}};Qr.update();var no="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(Qr,"hasSupport")?Te(document,no,bt,{passive:!0}):Te(document,no,bt),Ji();var Zu=["click","mouseup","mousedown","mousemove","keypress","keydown","keyup"],Yu=["resize","focus","blur"],en=function(Qu,Ze){return Ze===void 0&&(Ze=bt),function(rr){return Te(document,rr,Ze)}};Zu.forEach(en(document)),Yu.forEach(en(window)),en(window,Fu)("scroll")}if(se.enabled&&(Uu||tr)){Wt=me.getTime();var io=void 0;for(io in se.configurations){var tn=se.configurations[io];tn&&(window.clearInterval(tn.activityInterval),Ku(tn,E,Q))}}}function Ku(m,I,E){var ee=function(me,tr){He(),me({context:tr,pageViewId:Zr(),minXOffset:zt,minYOffset:Jt,maxXOffset:Kt,maxYOffset:Xt}),Ji()},Q=function(){var me=new Date;Wt+m.configMinimumVisitLength>me.getTime()&&ee(m.callback,Yr(I,E)),m.activityInterval=window.setInterval(Xe,m.configHeartBeatTimer)},Xe=function(){var me=new Date;Wt+m.configHeartBeatTimer>me.getTime()&&ee(m.callback,Yr(I,E))};m.configMinimumVisitLength!=0?m.activityInterval=window.setTimeout(Q,m.configMinimumVisitLength):m.activityInterval=window.setInterval(Xe,m.configHeartBeatTimer)}function ro(m){var I=m.minimumVisitLength,E=m.heartbeatDelay,ee=m.callback;if(oi(I)&&oi(E))return{configMinimumVisitLength:I*1e3,configHeartBeatTimer:E*1e3,callback:ee};fe.error("Activity tracking minimumVisitLength & heartbeatDelay must be integers")}function Ju(m){var I=m.context,E=m.minXOffset,ee=m.minYOffset,Q=m.maxXOffset,Xe=m.maxYOffset,me=document.title;me!==We&&(We=me,_t=void 0),N.track($a({pageUrl:Ve(Vt||ne),pageTitle:ai(_t||We),referrer:Ve(Ce||Ne),minXOffset:Qt(E),maxXOffset:Qt(Q),minYOffset:Qt(ee),maxYOffset:Qt(Xe)}),I)}var Xu={getDomainSessionIndex:function(){return he},getPageViewId:function(){return Zr()},newSession:Wu,getCookieName:function(m){return Je(m)},getUserId:function(){return Fe},getDomainUserId:function(){return St()[1]},getDomainUserInfo:function(){return St()},setReferrerUrl:function(m){Ce=m},setCustomUrl:function(m){He(),Vt=Mu(ne,m)},setDocumentTitle:function(m){We=document.title,_t=m},discardHashTag:function(m){$i=m},discardBrace:function(m){Ui=m},setCookiePath:function(m){Gr=m,zi()},setVisitorCookieTimeout:function(m){Mi=m},crossDomainLinker:function(m){Gi(m)},enableActivityTracking:function(m){se.configurations.pagePing||(se.enabled=!0,se.configurations.pagePing=ro(ve(ve({},m),{callback:Ju})))},enableActivityTrackingCallback:function(m){se.configurations.callback||(se.enabled=!0,se.configurations.callback=ro(m))},updatePageActivity:function(){bt()},setOptOutCookie:function(m){Wr=m},setUserId:function(m){Fe=m},setUserIdFromLocation:function(m){He(),Fe=dt(m,ne)},setUserIdFromReferrer:function(m){He(),Fe=dt(m,Ne)},setUserIdFromCookie:function(m){Fe=Ue(m)},setCollectorUrl:function(m){ie=eo(m),Re.setCollectorUrl(ie)},setBufferSize:function(m){Re.setBufferSize(m)},flushBuffer:function(m){m===void 0&&(m={}),Re.executeQueue(),m.newBufferSize&&Re.setBufferSize(m.newBufferSize)},trackPageView:function(m){m===void 0&&(m={}),zu(m)},preservePageViewId:function(){Hi=!0},disableAnonymousTracking:function(m){P.anonymousTracking=!1,Yi(m),Qi(),Re.executeQueue()},enableAnonymousTracking:function(m){var I;P.anonymousTracking=(I=m&&(m==null?void 0:m.options))!==null&&I!==void 0?I:!0,Yi(m),ze||to()},clearUserData:Zi};return ve(ve({},Xu),{id:y,namespace:S,core:N,sharedState:A})},p=l(e,t,r,n,o,u),v=ve(ve({},p),{addPlugin:function(y){var S,x;v.core.addPlugin(y),(x=(S=y.plugin).activateBrowserPlugin)===null||x===void 0||x.call(S,v)}});return c.forEach(function(y){var S;(S=y.activateBrowserPlugin)===null||S===void 0||S.call(y,v)}),v}var vt={};function Ut(e,t){try{fs(e??ls()).forEach(t)}catch(r){fe.error("Function failed",r)}}function Lr(e,t,r){try{di(e??Object.keys(t),t).forEach(r)}catch(n){fe.error("Function failed",n)}}function cs(e,t,r,n,o,u){return vt.hasOwnProperty(e)?null:(vt[e]=us(e,t,r,n,o,u),vt[e])}function fs(e){return di(e,vt)}function ls(){return Object.keys(vt)}function di(e,t){for(var r=[],n=0,o=e;n<o.length;n++){var u=o[n];t.hasOwnProperty(u)?r.push(t[u]):fe.warn(u+" not configured")}return r}var ds=function(){function e(){this.outQueues=[],this.bufferFlushers=[],this.hasLoaded=!1,this.registeredOnLoadHandlers=[]}return e}();function hs(){var e=new ds,t=document,r=window;function n(){t.visibilityState=="hidden"&&e.bufferFlushers.forEach(function(l){l(!1)})}function o(){e.bufferFlushers.forEach(function(l){l(!1)})}function u(){var l;if(!e.hasLoaded)for(e.hasLoaded=!0,l=0;l<e.registeredOnLoadHandlers.length;l++)e.registeredOnLoadHandlers[l]();return!0}function c(){t.addEventListener?t.addEventListener("DOMContentLoaded",function l(){t.removeEventListener("DOMContentLoaded",l,!1),u()}):t.attachEvent&&t.attachEvent("onreadystatechange",function l(){t.readyState==="complete"&&(t.detachEvent("onreadystatechange",l),u())}),Te(r,"load",u,!1)}return t.visibilityState&&Te(t,"visibilitychange",n,!1),Te(r,"beforeunload",o,!1),document.readyState==="loading"?c():u(),e}/*!
 * Ecommerce tracking for Snowplow v3.8.0 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */function hi(){return{items:[]}}var be={},Se={};function ps(){return{activateBrowserPlugin:function(e){be[e.id]=e,Se[e.id]=hi()}}}function vs(e,t){t===void 0&&(t=Object.keys(be)),t.forEach(function(r){Se[r]&&(Se[r].transaction=e)})}function ms(e,t){t===void 0&&(t=Object.keys(be)),t.forEach(function(r){Se[r]&&Se[r].items.push(e)})}function ys(e){e===void 0&&(e=Object.keys(be)),Lr(e,be,function(t){var r=Se[t.id].transaction;r&&t.core.track(Ua(r),r.context,r.timestamp);for(var n=0;n<Se[t.id].items.length;n++){var o=Se[t.id].items[n];t.core.track(Ba(o),o.context,o.timestamp)}Se[t.id]=hi()})}function gs(e,t){t===void 0&&(t=Object.keys(be)),Lr(t,be,function(r){r.core.track(La(e),e.context,e.timestamp)})}function _s(e,t){t===void 0&&(t=Object.keys(be)),Lr(t,be,function(r){r.core.track(Ma(e),e.context,e.timestamp)})}/*!
 * Browser tracker for Snowplow v3.8.0 (http://bit.ly/sp-js)
 * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
 * Licensed under BSD-3-Clause
 */function ws(e,t){Ut(t,function(r){r.enableActivityTracking(e)})}function bs(e,t){Ut(t,function(r){r.trackPageView(e)})}function re(e,t){Ut(t,function(r){r.core.track(Tr({event:e.event}),e.context,e.timestamp)})}function Ss(e,t){Ut(t,function(r){r.core.addGlobalContexts(e)})}var pi=typeof window<"u"?hs():void 0;function Os(e,t,r){if(r===void 0&&(r={}),pi)return cs(e,e,"js-".concat(Na),t,pi,r)}var Ps=1/0,Is=9007199254740991,xs="[object Arguments]",Ts="[object Function]",As="[object GeneratorFunction]",Es="[object Symbol]",js=typeof oe=="object"&&oe&&oe.Object===Object&&oe,Cs=typeof self=="object"&&self&&self.Object===Object&&self,ks=js||Cs||Function("return this")();function Rs(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Ds(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function $s(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var Mr=Object.prototype,Us=Mr.hasOwnProperty,Nr=Mr.toString,vi=ks.Symbol,Bs=Mr.propertyIsEnumerable,mi=vi?vi.isConcatSpreadable:void 0,yi=Math.max;function gi(e,t,r,n,o){var u=-1,c=e.length;for(r||(r=Fs),o||(o=[]);++u<c;){var l=e[u];t>0&&r(l)?t>1?gi(l,t-1,r,n,o):$s(o,l):n||(o[o.length]=l)}return o}function Ls(e,t){return e=Object(e),Ms(e,t,function(r,n){return n in e})}function Ms(e,t,r){for(var n=-1,o=t.length,u={};++n<o;){var c=t[n],l=e[c];r(l,c)&&(u[c]=l)}return u}function Ns(e,t){return t=yi(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,o=yi(r.length-t,0),u=Array(o);++n<o;)u[n]=r[t+n];n=-1;for(var c=Array(t+1);++n<t;)c[n]=r[n];return c[t]=u,Rs(e,this,c)}}function Fs(e){return qs(e)||Vs(e)||!!(mi&&e&&e[mi])}function Hs(e){if(typeof e=="string"||Xs(e))return e;var t=e+"";return t=="0"&&1/e==-Ps?"-0":t}function Vs(e){return Ws(e)&&Us.call(e,"callee")&&(!Bs.call(e,"callee")||Nr.call(e)==xs)}var qs=Array.isArray;function Gs(e){return e!=null&&Ks(e.length)&&!zs(e)}function Ws(e){return _i(e)&&Gs(e)}function zs(e){var t=Js(e)?Nr.call(e):"";return t==Ts||t==As}function Ks(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Is}function Js(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function _i(e){return!!e&&typeof e=="object"}function Xs(e){return typeof e=="symbol"||_i(e)&&Nr.call(e)==Es}var Zs=Ns(function(e,t){return e==null?{}:Ls(e,Ds(gi(t,1),Hs))}),mt=Zs,Bt={},Ys={get exports(){return Bt},set exports(e){Bt=e}};const wi=e=>typeof e=="object"&&e!==null,bi=Symbol("skip"),Si=e=>wi(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),Fr=(e,t,r,n=new WeakMap)=>{if(r={deep:!1,target:{},...r},n.has(e))return n.get(e);n.set(e,r.target);const{target:o}=r;delete r.target;const u=c=>c.map(l=>Si(l)?Fr(l,t,r,n):l);if(Array.isArray(e))return u(e);for(const[c,l]of Object.entries(e)){const p=t(c,l,e);if(p===bi)continue;let[v,y,{shouldRecurse:S=!0}={}]=p;v!=="__proto__"&&(r.deep&&S&&Si(y)&&(y=Array.isArray(y)?u(y):Fr(y,t,r,n)),o[v]=y)}return o};Ys.exports=(e,t,r)=>{if(!wi(e))throw new TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return Fr(e,t,r)},Bt.mapObjectSkip=bi;var Hr=function(){return Hr=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},Hr.apply(this,arguments)},Vr=function(){return Vr=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},Vr.apply(this,arguments)};function Qs(e){return e.toLowerCase()}var eu=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],tu=/[^A-Z0-9]+/gi;function ru(e,t){t===void 0&&(t={});for(var r=t.splitRegexp,n=r===void 0?eu:r,o=t.stripRegexp,u=o===void 0?tu:o,c=t.transform,l=c===void 0?Qs:c,p=t.delimiter,v=p===void 0?" ":p,y=Oi(Oi(e,n,"$1\0$2"),u,"\0"),S=0,x=y.length;y.charAt(S)==="\0";)S++;for(;y.charAt(x-1)==="\0";)x--;return y.slice(S,x).split("\0").map(l).join(v)}function Oi(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce(function(n,o){return n.replace(o,r)},e)}function nu(e,t){return t===void 0&&(t={}),ru(e,Vr({delimiter:"."},t))}function iu(e,t){return t===void 0&&(t={}),nu(e,Hr({delimiter:"_"},t))}const ou=ur(Object.freeze(Object.defineProperty({__proto__:null,snakeCase:iu},Symbol.toStringTag,{value:"Module"}))),au=Bt,{snakeCase:su}=ou;var Lt=function(e,t){return t=Object.assign({deep:!0,exclude:[],parsingOptions:{}},t),au(e,function(r,n){return[uu(t.exclude,r)?r:su(r,t.parsingOptions),n]},t)};function uu(e,t){return e.some(function(r){return typeof r=="string"?r===t:r.test(t)})}const cu=e=>Ye({mobile:!!e.mobile,email:e.user.email,user_id:e.user.user_id,order_id:e.transaction.order_id,total:e.transaction.total,currency:e.transaction.currency,shipping:e.transaction.shipping_cost,items:e.transaction.line_items.map(t=>({quantity:t.quantity,subtotal:t.subtotal,sku:t.product.sku_code,id:t.product.id,size:t.product.size}))}),Mt=(e,t,r={})=>{const n=`${Math.ceil(Math.random()*1e3)}${new Date().getTime()}`;De(rn(e,{...t,no_cache:n},r))},fu=async(e,t={})=>{try{const{protocol:r="https",host:n}=t;if(!n)throw new Error("No host configured");const o=new URLSearchParams(e).toString(),u=`${r}//${n}/widgets/track_and_identify?${o}`,c=await fetch(u,{method:"GET",credentials:"include"});if(!c.ok)throw new Error("Failed to retrieve JWT");const l=await c.json();if(l&&l.token&&localStorage)localStorage.setItem("acs_drsp_jwt",l.token);else throw new Error("Invalid response data");return l.event}catch(r){throw r}},lu=(e,t,r={})=>{const n=Lt(mt(t,["productCodes","skus"]));Mt("/widgets/basket_tracking",{payload:JSON.stringify(Ye(n))},e.config(r))},du=(e,t,r={})=>{const n=cu(t);Mt("/widgets/capture",{payload:JSON.stringify(Ye(n))},e.config(r))},hu=async(e,t,r={})=>{const n=Lt(Ye(mt(t,["productCode","mobile","skuId","type","userId"])));if(e.config(r).retrieveJWT){const o=await fu(n,e.config(r));o.type==="pageTracked"&&(e.configuration.set(e,"pageEventId",o.id),e.configuration.set(e,"location",window.location.href))}else Mt("/widgets/track",n,e.config(r))},pu=e=>{const t={path:e.page.breadcrumb};return e.page.number&&(t.page=e.page.number),e.listing&&(e.listing.filters&&(t.filters=e.listing.filters.filter(r=>r.selected.length>0)),e.listing.items&&(t.items=e.listing.items.map(r=>r.id))),t},Pi={basket:lu,plp:(e,t,r={})=>{var u,c,l,p;t||_e({name:"trackPLP"});const n=e.config(r);if(!((c=(u=n==null?void 0:n.tracking)==null?void 0:u.plp)!=null&&c.itemsOptional)&&(!((l=t==null?void 0:t.listing)!=null&&l.items)||((p=t==null?void 0:t.listing)==null?void 0:p.items.length)===0))throw new Error("trackPLP requires items on the page to be specified or `config.tracking.plp.itemsOptional` to be true");const o=pu(t);Mt("/widgets/plp_capture",{payload:JSON.stringify(Ye(o))},n)},pdp:hu,order:du,identify:(e,t,r={})=>{if(!t||!t.email&&!t.userId)throw new Error("trackIdentify requires either an `email` or `userId` to be provided.")},addToBasket:(e,t,r={})=>{if(!t||!t.productCode&&!t.sku)throw new Error("trackAddToBasket requires either a `productCode` or `sku`")}},J="dressipi",vu=e=>{if(!e.host)return;if(!e.namespace_id)throw new Error("Please configure your Dressipi snippet with a valid namespace_id.");const t=Os(J,e.host,{appId:e.namespace_id,postPath:"/t/t",cookieName:"_drsp_id",cookieDomain:e.host,plugins:[ps()],contexts:{webPage:e.trackWebPage||!1}});return ws({minimumVisitLength:10,heartbeatDelay:10}),e.variation&&Ss([{schema:"iglu:com.dressipi/external_variant/jsonschema/1-0-0",data:{variant:String(e.variation)}}],[J]),Au(),t},mu=(e,t={})=>{bs({},[J])},Ii=(e,t,r={})=>{if(!t.sku&&!t.productCode)throw new Error("A sku and/or productCode is required to track a view of an item on a PDP");const n={sku:t.sku||"",product_code:t.productCode||""};re({event:{schema:"iglu:com.dressipi/item_view/jsonschema/1-0-0",data:{item:n}}},[J]),Pi.pdp(e,{productCode:t.productCode||"",skuId:t.sku},r)},yu=e=>e?typeof e.number=="string"?parseInt(e.number,10):e.number:null,gu=(e,t,r={})=>{t||_e({name:"trackPLP"});const n=yu(t.page);re({event:{schema:"iglu:com.dressipi/listings_view/jsonschema/1-0-0",data:{page:n!==null?{number:n}:null,items:t.items.map(u=>Lt(u)),filters:t.filters}}},[J])},xi=(e,t,r={})=>{if(!t||!t.customerId&&!t.email)throw new Error("trackIdentify requires either an `email` or `customerId` to be provided.");const n=Object.entries(t).filter(o=>o[1]).map(o=>[o[0],String(o[1])]).reduce((o,u)=>{const[c,l]=u;if(l.indexOf("@")==-1)return o[c]=Promise.resolve({name:c,value:l}),o;const p=new on.Sha256;return p.update(l+"_"+e.config().namespace_id),o[c]=p.digest().then(v=>({name:c,value:v.reduce((y,S)=>y+("0"+S.toString(16)).slice(-2),"")})),o},{});Promise.all(Object.values(n)).then(o=>{re({event:{schema:"iglu:com.dressipi/identify/jsonschema/1-0-0",data:{identifiers:o}}},[J])})},_u=(e,t,r={},n={})=>{t||_e({name:"trackOrder",entity:"order"});let o=!0;const u=[];t.lineItems.length||(o=!1,u.push("at least one line item must be provided"));for(let v=0;v<t.lineItems.length;v++){const y=t.lineItems[v];(!y.sku||!y.quantity)&&(o=!1,u.push("each line item must have a sku and quantity"))}o||_e({name:"trackOrder",entity:"order",errors:u});const c=t.orderId;vs(mt(t,["orderId","total","tax","shipping","currency"]),[J]);for(let v=0;v<t.lineItems.length;v++)ms({orderId:c,...mt(t.lineItems[v],["sku","name","price","quantity","currency"])},[J]);ys([J]);const l=r.customerId&&String(r.customerId).trim().length>0,p=r.email&&String(r.email).trim().length>0;(l||p)&&xi(e,r,n),Pi.order(e,{mobile:!1,user:{user_id:r.customerId||"",email:r.email||""},transaction:{order_id:t.orderId,total:t.total,currency:t.currency,shipping_cost:t.shipping,line_items:t.lineItems.map(v=>({quantity:v.quantity,subtotal:v.price,product:{sku_code:v.sku,id:-1,size:""}}))}},n)},wu=(e,t,r={})=>{const n={...t};n.sku&&(n.sku=String(n.sku)),gs(n,[J])},bu=(e,t,r={})=>{const n={...t};n.sku&&(n.sku=String(n.sku)),_s(n,[J])},yt=e=>e?[{schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:e}}]:null,Ti=(e,t,r={})=>{t||_e({name:"trackItemClickPDP",entity:"item"});const n={schema:"iglu:com.dressipi/item_click_pdp/jsonschema/1-0-0",data:{request_id:t.requestId,related_items_set_id:t.setId,dressipi_item_id:t.itemId}},o=yt(t.parentPageViewId);if(o){re({event:n,context:o},[J]);return}re({event:n},[J])},Ai=(e,t,r={})=>{t||_e({name:"trackItemClickQuickView",entity:"item"});const n={schema:"iglu:com.dressipi/item_click_quickview/jsonschema/1-0-0",data:{request_id:t.requestId,related_items_set_id:t.setId,dressipi_item_id:t.itemId}},o=yt(t.parentPageViewId);if(o){re({event:n,context:o},[J]);return}re({event:n},[J])},Ei=(e,t,r={})=>{t||_e({name:"trackcarouselNavigate",entity:"content"});const n={schema:"iglu:com.dressipi/carousel_navigate/jsonschema/1-0-0",data:{request_id:t.requestId,direction:t.direction}},o=yt(t.parentPageViewId);if(o){re({event:n,context:o},[J]);return}re({event:n},[J])},ji=(e,t,r={})=>{t||_e({name:"trackCarouselPaginate",entity:"content"});const n={schema:"iglu:com.dressipi/carousel_paginate/jsonschema/1-0-0",data:{request_id:t.requestId,page:t.page}},o=yt(t.parentPageViewId);if(o){re({event:n,context:o},[J]);return}re({event:n},[J])},Ci=(e,t,r={})=>{t||_e({name:"trackTabClick",entity:"content"});const n={schema:"iglu:com.dressipi/tab_click/jsonschema/1-0-0",data:{request_id:t.requestId,tab_name:t.tabName}},o=yt(t.parentPageViewId);if(o){re({event:n,context:o},[J]);return}re({event:n},[J])},Nt=e=>{var t;return(t=e.closest("[data-dressipi-parent-page-view-id]"))==null?void 0:t.getAttribute("data-dressipi-parent-page-view-id")},Ft=e=>{var t;return(t=e.closest("[data-dressipi-event-id]"))==null?void 0:t.getAttribute("data-dressipi-event-id")},Su=e=>{var t;return(t=e.closest("[data-dressipi-content-id]"))==null?void 0:t.getAttribute("data-dressipi-content-id")},Ou=e=>{var t;return(t=e.closest("[data-dressipi-raw-garment-id]"))==null?void 0:t.getAttribute("data-dressipi-raw-garment-id")},ki=e=>{const t=Nt(e)||null,r=Ft(e),n=Su(e),o=Ou(e),u=o?Number.parseInt(o,10):null;return r&&n&&u?{parentPageViewId:t,requestId:r,setId:n,itemId:u}:null};function Pu(e){const t=ki(e);t&&Ai(null,t)}function Iu(e){const t=ki(e);t&&Ti(null,t)}function Ri(e,t){const r=Nt(e)||null,n=Ft(e);n&&Ei(null,{parentPageViewId:r,requestId:n,direction:t})}function xu(e){const t=Nt(e)||null,r=Ft(e),n=Number.parseInt(e.getAttribute("data-dressipi-paginate")||"0",10);r&&ji(null,{parentPageViewId:t,requestId:r,page:n})}function Tu(e){var o;const t=Nt(e)||null,r=Ft(e),n=(o=e.closest("[data-dressipi-tab]"))==null?void 0:o.getAttribute("data-dressipi-tab");r&&Ci(null,{parentPageViewId:t,requestId:r,tabName:n})}const Di=e=>{const t=e.target;t.closest("[data-dressipi-product-link-quickview]")?Pu(t):t.closest("[data-dressipi-product-link-pdp]")&&Iu(t),t.closest("[data-dressipi-navigate-next]")&&Ri(t,"previous"),t.closest("[data-dressipi-navigate-previous]")&&Ri(t,"next"),t.closest("[data-dressipi-paginate]")&&xu(t),t.closest("[data-dressipi-tab]")&&Tu(t)},Au=()=>{const e=document.body;e.removeEventListener("click",Di),e.addEventListener("click",Di)},Eu={init:vu,pageView:mu,pdp:Ii,itemView:Ii,addToBasket:wu,removeFromBasket:bu,plp:gu,order:_u,identify:xi,itemClickPDP:Ti,itemClickQuickView:Ai,carouselNavigate:Ei,carouselPaginate:ji,tabClick:Ci},gt=(e,t,r,n)=>{const o={width:r.width||"100%",height:r.height||null},{deviceType:u,tracker:c,variation:l}=n;if(!n.host)throw new Error("Please pass a server host to connect to in the configuration.");const p=$e({deviceType:u,parentPageViewId:c==null?void 0:c.getPageViewId(),variation:l},mt(r,["channel","productCode","skuId","id","language","payload","deviceType","variation"])),v=Lt(p);if(!r.channel)throw new Error("Please pass a server host to connect to in the configuration.");const y=rn(t,v,n),S=ye(o.height,o.width,y);r.insertBefore?e.insertBefore(S,r.insertBefore):e.appendChild(S);const x={onLoad:r.onLoad||(()=>{}),onResize:r.onResize||(()=>{}),onClose:r.onClose||(()=>{}),onScroll:r.onScroll||(()=>{})};fo(S,n.host,r.channel,x)},ju={sizing:(e,t,r,n={})=>{r.channel=r.channel||"banner",gt(t,"/widgets/banner",r,e.config(n))},basket:(e,t,r={},n={})=>{const o=(r==null?void 0:r.items)||[];o.length!==0&&gt(t,"/widgets/shopping_basket",$e({channel:"shopping_basket",payload:JSON.stringify({items:o})},r),e.config(n))},plp:(e,t,r={},n={})=>{gt(t,"/widgets/plp_widgets",$e({channel:"plp",id:r.plpType},r),e.config(n))},similarItems:(e,t,r,n={})=>{r.channel=r.channel||"similar_items",gt(t,"/widgets/similar_items",r,e.config(n))},outfits:(e,t,r,n={})=>{r.channel=r.channel||"outfits",gt(t,"/widgets/outfits",r,e.config(n))}},Cu=async(e,t,r={})=>{try{const n=e.config(r),{protocol:o="https:",host:u}=n;if(!u)throw new Error("No host configured");const c=ho(t||{},["per_page","page"]),l=new URLSearchParams(c);r.variation&&l.set("variation",r.variation);const p=`${o}//${u}/api/recommendations/facetted?${l}&garment_format=detailed`,v=await fetch(p,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({facets:t?t.facets:[]})});if(!v.ok)throw new Error("Failed to retrieve facetted recommendations ["+v.status+"]");const y=await ku(v);return t&&t.onSuccess&&t.onSuccess(y),y}catch(n){return t&&t.onFailure&&t.onFailure(n),Promise.reject(n)}},ku=async e=>{const t=await e.json();return Du(t)},Ru=e=>({id:e.garment_id,dressipi_item_id:e.raw_garment_id,name:e.name,brand_name:e.brand_name,url:e.url,images:e.feed_image_urls||[],image_url:e.feed_image_urls?e.feed_image_urls[0]:"",has_outfits:e.has_outfits,status:e.garment_status,price:e.price,old_price:e.old_price}),Du=e=>({response_id:e.event_id,content_id:e.content_id,items:e.recommendations.map(Ru),pagination:{last_page:e.pagination.total_pages,current_page:e.pagination.current_page,total_items:e.pagination.total_entries}}),$u={search:Cu};try{const e=new po(Eu,ju,vo,Io,$u,null,new Pt);xo(e),yo(e)}catch(e){e instanceof Error?console.error(`[DRESSIPI] ${e.message}`,e):console.error("[DRESSIPI] Unknown error:",e)}})();
})()